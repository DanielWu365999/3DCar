/*!
 * jQuery JavaScript Library v1.4.3
 */
!function(t,n){function U(){return!1}function ba(){return!0}function ja(t,n,r){return r[0].type=t,i.event.handle.apply(n,r)}function Ga(t){var n,r,o,c,u,f,p,h,m,g,y=[],x=[];if("function"==typeof(c=i.data(this,this.nodeType?"events":"__events__"))&&(c=c.events),t.liveFired!==this&&c&&c.live&&(!t.button||"click"!==t.type)){t.namespace&&(g=RegExp("(^|\\.)"+t.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")),t.liveFired=this;var N=c.live.slice(0);for(f=0;f<N.length;f++)(c=N[f]).origType.replace(T,"")===t.type?x.push(c.selector):N.splice(f--,1);for(p=0,h=(x=i(t.target).closest(x,t.currentTarget)).length;p<h;p++)for(m=x[p],f=0;f<N.length;f++)c=N[f],m.selector!==c.selector||g&&!g.test(c.namespace)||(u=m.elem,o=null,"mouseenter"!==c.preType&&"mouseleave"!==c.preType||(t.type=c.preType,o=i(t.relatedTarget).closest(c.selector)[0]),o&&o===u||y.push({elem:u,handleObj:c,level:m.level}));for(p=0,h=y.length;p<h&&(x=y[p],!(r&&x.level>r));p++)t.currentTarget=x.elem,t.data=x.handleObj.data,t.handleObj=x.handleObj,(!1===(g=x.handleObj.origHandler.apply(x.elem,arguments))||t.isPropagationStopped())&&(r=x.level,!1===g&&(n=!1));return n}}function Y(t,n){return(t&&"*"!==t?t+".":"")+n.replace(w,"`").replace(E,"&")}function ka(t,n,r){if(i.isFunction(n))return i.grep(t,(function(t,i){return!!n.call(t,i,t)===r}));if(n.nodeType)return i.grep(t,(function(t){return t===n===r}));if("string"==typeof n){var o=i.grep(t,(function(t){return 1===t.nodeType}));if(B.test(n))return i.filter(n,o,!r);n=i.filter(n,o)}return i.grep(t,(function(t){return i.inArray(t,n)>=0===r}))}function la(t,n){var r=0;n.each((function(){if(this.nodeName===(t[r]&&t[r].nodeName)){var n=i.data(t[r++]),o=i.data(this,n);if(n=n&&n.events)for(var c in delete o.handle,o.events={},n)for(var u in n[c])i.event.add(this,c,n[c][u],n[c][u].data)}}))}function Ka(t,n){n.src?i.ajax({url:n.src,async:!1,dataType:"script"}):i.globalEval(n.text||n.textContent||n.innerHTML||""),n.parentNode&&n.parentNode.removeChild(n)}function ma(t,n,r){var o="width"===n?t.offsetWidth:t.offsetHeight;return"border"===r||i.each("width"===n?oe:ae,(function(){r||(o-=parseFloat(i.css(t,"padding"+this))||0),"margin"===r?o+=parseFloat(i.css(t,"margin"+this))||0:o-=parseFloat(i.css(t,"border"+this+"Width"))||0})),o}function ca(t,n,r,o){i.isArray(n)&&n.length?i.each(n,(function(n,c){r||pe.test(t)?o(t,c):ca(t+"["+("object"==typeof c||i.isArray(c)?n:"")+"]",c,r,o)})):r||null==n||"object"!=typeof n?o(t,n):i.isEmptyObject(n)?o(t,""):i.each(n,(function(n,i){ca(t+"["+n+"]",i,r,o)}))}function S(t,n){var r={};return i.each(Se.concat.apply([],Se.slice(0,n)),(function(){r[this]=t})),r}function oa(t){if(!Ne[t]){var n=i("<"+t+">").appendTo("body"),r=n.css("display");n.remove(),"none"!==r&&""!==r||(r="block"),Ne[t]=r}return Ne[t]}function ea(t){return i.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var r=t.document,i=function(){function a(){if(!b.isReady){try{r.documentElement.doScroll("left")}catch(t){return void setTimeout(a,1)}b.ready()}}var i,o,b=function(t,n){return new b.fn.init(t,n)},c=t.jQuery,u=t.$,f=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,p=/\S/,h=/^\s+/,m=/\s+$/,g=/\W/,y=/\d/,x=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,T=/^[\],:{}\s]*$/,N=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,w=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,E=/(?:^|:|,)(?:\s*\[)+/g,C=/(webkit)[ \/]([\w.]+)/,A=/(opera)(?:.*version)?[ \/]([\w.]+)/,j=/(msie) ([\w.]+)/,F=/(mozilla)(?:.*? rv:([\w.]+))?/,k=navigator.userAgent,L=!1,O=[],B=Object.prototype.toString,H=Object.prototype.hasOwnProperty,P=Array.prototype.push,_=Array.prototype.slice,q=String.prototype.trim,I=Array.prototype.indexOf,W={};return b.fn=b.prototype={init:function(t,o){var c,u,p;if(!t)return this;if(t.nodeType)return this.context=this[0]=t,this.length=1,this;if("body"===t&&!o&&r.body)return this.context=r,this[0]=r.body,this.selector="body",this.length=1,this;if("string"==typeof t){if(!(c=f.exec(t))||!c[1]&&o)return o||g.test(t)?!o||o.jquery?(o||i).find(t):b(o).find(t):(this.selector=t,this.context=r,t=r.getElementsByTagName(t),b.merge(this,t));if(c[1])return p=o?o.ownerDocument||o:r,(u=x.exec(t))?b.isPlainObject(o)?(t=[r.createElement(u[1])],b.fn.attr.call(t,o,!0)):t=[p.createElement(u[1])]:t=((u=b.buildFragment([c[1]],[p])).cacheable?u.fragment.cloneNode(!0):u.fragment).childNodes,b.merge(this,t);if((u=r.getElementById(c[2]))&&u.parentNode){if(u.id!==c[2])return i.find(t);this.length=1,this[0]=u}return this.context=r,this.selector=t,this}return b.isFunction(t)?i.ready(t):(t.selector!==n&&(this.selector=t.selector,this.context=t.context),b.makeArray(t,this))},selector:"",jquery:"1.4.3",length:0,size:function(){return this.length},toArray:function(){return _.call(this,0)},get:function(t){return null==t?this.toArray():t<0?this.slice(t)[0]:this[t]},pushStack:function(t,n,r){var i=b();return b.isArray(t)?P.apply(i,t):b.merge(i,t),i.prevObject=this,i.context=this.context,"find"===n?i.selector=this.selector+(this.selector?" ":"")+r:n&&(i.selector=this.selector+"."+n+"("+r+")"),i},each:function(t,n){return b.each(this,t,n)},ready:function(t){return b.bindReady(),b.isReady?t.call(r,b):O&&O.push(t),this},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(_.apply(this,arguments),"slice",_.call(arguments).join(","))},map:function(t){return this.pushStack(b.map(this,(function(n,r){return t.call(n,r,n)})))},end:function(){return this.prevObject||b(null)},push:P,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var t,r,i,o,c,u=arguments[0]||{},f=1,p=arguments.length,h=!1;for("boolean"==typeof u&&(h=u,u=arguments[1]||{},f=2),"object"==typeof u||b.isFunction(u)||(u={}),p===f&&(u=this,--f);f<p;f++)if(null!=(t=arguments[f]))for(r in t)i=u[r],u!==(o=t[r])&&(h&&o&&(b.isPlainObject(o)||(c=b.isArray(o)))?(c?(c=!1,clone=i&&b.isArray(i)?i:[]):clone=i&&b.isPlainObject(i)?i:{},u[r]=b.extend(h,clone,o)):o!==n&&(u[r]=o));return u},b.extend({noConflict:function(n){return t.$=u,n&&(t.jQuery=c),b},isReady:!1,readyWait:1,ready:function(t){if(!0===t&&b.readyWait--,!b.readyWait||!0!==t&&!b.isReady){if(!r.body)return setTimeout(b.ready,1);if(b.isReady=!0,!(!0!==t&&--b.readyWait>0)){if(O){for(var n=0;t=O[n++];)t.call(r,b);O=null}b.fn.triggerHandler&&b(r).triggerHandler("ready")}}},bindReady:function(){if(!L){if(L=!0,"complete"===r.readyState)return setTimeout(b.ready,1);if(r.addEventListener)r.addEventListener("DOMContentLoaded",o,!1),t.addEventListener("load",b.ready,!1);else if(r.attachEvent){r.attachEvent("onreadystatechange",o),t.attachEvent("onload",b.ready);var n=!1;try{n=null==t.frameElement}catch(t){}r.documentElement.doScroll&&n&&a()}}},isFunction:function(t){return"function"===b.type(t)},isArray:Array.isArray||function(t){return"array"===b.type(t)},isWindow:function(t){return t&&"object"==typeof t&&"setInterval"in t},isNaN:function(t){return null==t||!y.test(t)||isNaN(t)},type:function(t){return null==t?String(t):W[B.call(t)]||"object"},isPlainObject:function(t){if(!t||"object"!==b.type(t)||t.nodeType||b.isWindow(t))return!1;if(t.constructor&&!H.call(t,"constructor")&&!H.call(t.constructor.prototype,"isPrototypeOf"))return!1;for(var r in t);return r===n||H.call(t,r)},isEmptyObject:function(t){for(var n in t)return!1;return!0},error:function(t){throw t},parseJSON:function(n){return"string"==typeof n&&n?(n=b.trim(n),T.test(n.replace(N,"@").replace(w,"]").replace(E,""))?t.JSON&&t.JSON.parse?t.JSON.parse(n):new Function("return "+n)():void b.error("Invalid JSON: "+n)):null},noop:function(){},globalEval:function(t){if(t&&p.test(t)){var n=r.getElementsByTagName("head")[0]||r.documentElement,i=r.createElement("script");i.type="text/javascript",b.support.scriptEval?i.appendChild(r.createTextNode(t)):i.text=t,n.insertBefore(i,n.firstChild),n.removeChild(i)}},nodeName:function(t,n){return t.nodeName&&t.nodeName.toUpperCase()===n.toUpperCase()},each:function(t,r,i){var o,c=0,u=t.length,f=u===n||b.isFunction(t);if(i)if(f){for(o in t)if(!1===r.apply(t[o],i))break}else for(;c<u&&!1!==r.apply(t[c++],i););else if(f){for(o in t)if(!1===r.call(t[o],o,t[o]))break}else for(i=t[0];c<u&&!1!==r.call(i,c,i);i=t[++c]);return t},trim:q?function(t){return null==t?"":q.call(t)}:function(t){return null==t?"":t.toString().replace(h,"").replace(m,"")},makeArray:function(t,n){var r=n||[];if(null!=t){var i=b.type(t);null==t.length||"string"===i||"function"===i||"regexp"===i||b.isWindow(t)?P.call(r,t):b.merge(r,t)}return r},inArray:function(t,n){if(n.indexOf)return n.indexOf(t);for(var r=0,i=n.length;r<i;r++)if(n[r]===t)return r;return-1},merge:function(t,r){var i=t.length,o=0;if("number"==typeof r.length)for(var c=r.length;o<c;o++)t[i++]=r[o];else for(;r[o]!==n;)t[i++]=r[o++];return t.length=i,t},grep:function(t,n,r){var i=[];r=!!r;for(var o=0,c=t.length;o<c;o++)r!==!!n(t[o],o)&&i.push(t[o]);return i},map:function(t,n,r){for(var i,o=[],c=0,u=t.length;c<u;c++)null!=(i=n(t[c],c,r))&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(t,r,i){return 2===arguments.length&&("string"==typeof r?(t=(i=t)[r],r=n):r&&!b.isFunction(r)&&(i=r,r=n)),!r&&t&&(r=function(){return t.apply(i||this,arguments)}),t&&(r.guid=t.guid=t.guid||r.guid||b.guid++),r},access:function(t,r,i,o,c,u){var f=t.length;if("object"==typeof r){for(var p in r)b.access(t,p,r[p],o,c,i);return t}if(i!==n){for(o=!u&&o&&b.isFunction(i),p=0;p<f;p++)c(t[p],r,o?i.call(t[p],p,c(t[p],r)):i,u);return t}return f?c(t[0],r):n},now:function(){return(new Date).getTime()},uaMatch:function(t){return t=t.toLowerCase(),{browser:(t=C.exec(t)||A.exec(t)||j.exec(t)||t.indexOf("compatible")<0&&F.exec(t)||[])[1]||"",version:t[2]||"0"}},browser:{}}),b.each("Boolean Number String Function Array Date RegExp Object".split(" "),(function(t,n){W["[object "+n+"]"]=n.toLowerCase()})),(k=b.uaMatch(k)).browser&&(b.browser[k.browser]=!0,b.browser.version=k.version),b.browser.webkit&&(b.browser.safari=!0),I&&(b.inArray=function(t,n){return I.call(n,t)}),/\s/.test(" ")||(h=/^[\s\xA0]+/,m=/[\s\xA0]+$/),i=b(r),r.addEventListener?o=function(){r.removeEventListener("DOMContentLoaded",o,!1),b.ready()}:r.attachEvent&&(o=function(){"complete"===r.readyState&&(r.detachEvent("onreadystatechange",o),b.ready())}),t.jQuery=t.$=b}();!function(){i.support={};var n=r.documentElement,o=r.createElement("script"),c=r.createElement("div"),u="script"+i.now();c.style.display="none",c.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var f=c.getElementsByTagName("*"),p=c.getElementsByTagName("a")[0],h=r.createElement("select"),m=h.appendChild(r.createElement("option"));if(f&&f.length&&p){i.support={leadingWhitespace:3===c.firstChild.nodeType,tbody:!c.getElementsByTagName("tbody").length,htmlSerialize:!!c.getElementsByTagName("link").length,style:/red/.test(p.getAttribute("style")),hrefNormalized:"/a"===p.getAttribute("href"),opacity:/^0.55$/.test(p.style.opacity),cssFloat:!!p.style.cssFloat,checkOn:"on"===c.getElementsByTagName("input")[0].value,optSelected:m.selected,optDisabled:!1,checkClone:!1,scriptEval:!1,noCloneEvent:!0,boxModel:null,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableHiddenOffsets:!0},h.disabled=!0,i.support.optDisabled=!m.disabled,o.type="text/javascript";try{o.appendChild(r.createTextNode("window."+u+"=1;"))}catch(t){}n.insertBefore(o,n.firstChild),t[u]&&(i.support.scriptEval=!0,delete t[u]),n.removeChild(o),c.attachEvent&&c.fireEvent&&(c.attachEvent("onclick",(function s(){i.support.noCloneEvent=!1,c.detachEvent("onclick",s)})),c.cloneNode(!0).fireEvent("onclick")),(c=r.createElement("div")).innerHTML="<input type='radio' name='radiotest' checked='checked'/>",(n=r.createDocumentFragment()).appendChild(c.firstChild),i.support.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,i((function(){var t=r.createElement("div");t.style.width=t.style.paddingLeft="1px",r.body.appendChild(t),i.boxModel=i.support.boxModel=2===t.offsetWidth,"zoom"in t.style&&(t.style.display="inline",t.style.zoom=1,i.support.inlineBlockNeedsLayout=2===t.offsetWidth,t.style.display="",t.innerHTML="<div style='width:4px;'></div>",i.support.shrinkWrapBlocks=2!==t.offsetWidth),t.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var n=t.getElementsByTagName("td");i.support.reliableHiddenOffsets=0===n[0].offsetHeight,n[0].style.display="",n[1].style.display="none",i.support.reliableHiddenOffsets=i.support.reliableHiddenOffsets&&0===n[0].offsetHeight,t.innerHTML="",r.body.removeChild(t).style.display="none"})),n=function(t){var n=r.createElement("div"),i=(t="on"+t)in n;return i||(n.setAttribute(t,"return;"),i="function"==typeof n[t]),i},i.support.submitBubbles=n("submit"),i.support.changeBubbles=n("change"),n=o=c=f=p=null}}(),i.props={for:"htmlFor",class:"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var o={},c=/^(?:\{.*\}|\[.*\])$/;i.extend({cache:{},uuid:0,expando:"jQuery"+i.now(),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},data:function(r,c,u){if(i.acceptData(r)){var f=(r=r==t?o:r).nodeType,p=f?r[i.expando]:null,h=i.cache;if(!f||p||"string"!=typeof c||u!==n)return f?p||(r[i.expando]=p=++i.uuid):h=r,"object"==typeof c?f?h[p]=i.extend(h[p],c):i.extend(h,c):f&&!h[p]&&(h[p]={}),r=f?h[p]:h,u!==n&&(r[c]=u),"string"==typeof c?r[c]:r}},removeData:function(n,r){if(i.acceptData(n)){var c=(n=n==t?o:n).nodeType,u=c?n[i.expando]:n,f=i.cache,p=c?f[u]:u;if(r)p&&(delete p[r],c&&i.isEmptyObject(p)&&i.removeData(n));else if(c&&i.support.deleteExpando)delete n[i.expando];else if(n.removeAttribute)n.removeAttribute(i.expando);else if(c)delete f[u];else for(var h in n)delete n[h]}},acceptData:function(t){if(t.nodeName){var n=i.noData[t.nodeName.toLowerCase()];if(n)return!(!0===n||t.getAttribute("classid")!==n)}return!0}}),i.fn.extend({data:function(t,r){if(void 0===t)return this.length?i.data(this[0]):null;if("object"==typeof t)return this.each((function(){i.data(this,t)}));var o=t.split(".");if(o[1]=o[1]?"."+o[1]:"",r===n){var u=this.triggerHandler("getData"+o[1]+"!",[o[0]]);if(u===n&&this.length&&(u=i.data(this[0],t))===n&&1===this[0].nodeType)if("string"==typeof(u=this[0].getAttribute("data-"+t)))try{u="true"===u||"false"!==u&&("null"===u?null:i.isNaN(u)?c.test(u)?i.parseJSON(u):u:parseFloat(u))}catch(t){}else u=n;return u===n&&o[1]?this.data(o[0]):u}return this.each((function(){var n=i(this),c=[o[0],r];n.triggerHandler("setData"+o[1]+"!",c),i.data(this,t,r),n.triggerHandler("changeData"+o[1]+"!",c)}))},removeData:function(t){return this.each((function(){i.removeData(this,t)}))}}),i.extend({queue:function(t,n,r){if(t){n=(n||"fx")+"queue";var o=i.data(t,n);return r?(!o||i.isArray(r)?o=i.data(t,n,i.makeArray(r)):o.push(r),o):o||[]}},dequeue:function(t,n){n=n||"fx";var r=i.queue(t,n),o=r.shift();"inprogress"===o&&(o=r.shift()),o&&("fx"===n&&r.unshift("inprogress"),o.call(t,(function(){i.dequeue(t,n)})))}}),i.fn.extend({queue:function(t,r){return"string"!=typeof t&&(r=t,t="fx"),r===n?i.queue(this[0],t):this.each((function(){var n=i.queue(this,t,r);"fx"===t&&"inprogress"!==n[0]&&i.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){i.dequeue(this,t)}))},delay:function(t,n){return t=i.fx&&i.fx.speeds[t]||t,n=n||"fx",this.queue(n,(function(){var r=this;setTimeout((function(){i.dequeue(r,n)}),t)}))},clearQueue:function(t){return this.queue(t||"fx",[])}});var u=/[\n\t]/g,f=/\s+/,p=/\r/g,h=/^(?:href|src|style)$/,m=/^(?:button|input)$/i,g=/^(?:button|input|object|select|textarea)$/i,y=/^a(?:rea)?$/i,x=/^(?:radio|checkbox)$/i;i.fn.extend({attr:function(t,n){return i.access(this,t,n,!0,i.attr)},removeAttr:function(t){return this.each((function(){i.attr(this,t,""),1===this.nodeType&&this.removeAttribute(t)}))},addClass:function(t){if(i.isFunction(t))return this.each((function(n){var r=i(this);r.addClass(t.call(this,n,r.attr("class")))}));if(t&&"string"==typeof t)for(var n=(t||"").split(f),r=0,o=this.length;r<o;r++){var c=this[r];if(1===c.nodeType)if(c.className){for(var u=" "+c.className+" ",p=c.className,h=0,m=n.length;h<m;h++)u.indexOf(" "+n[h]+" ")<0&&(p+=" "+n[h]);c.className=i.trim(p)}else c.className=t}return this},removeClass:function(t){if(i.isFunction(t))return this.each((function(n){var r=i(this);r.removeClass(t.call(this,n,r.attr("class")))}));if(t&&"string"==typeof t||t===n)for(var r=(t||"").split(f),o=0,c=this.length;o<c;o++){var p=this[o];if(1===p.nodeType&&p.className)if(t){for(var h=(" "+p.className+" ").replace(u," "),m=0,g=r.length;m<g;m++)h=h.replace(" "+r[m]+" "," ");p.className=i.trim(h)}else p.className=""}return this},toggleClass:function(t,n){var r=typeof t,o="boolean"==typeof n;return i.isFunction(t)?this.each((function(r){var o=i(this);o.toggleClass(t.call(this,r,o.attr("class"),n),n)})):this.each((function(){if("string"===r)for(var c,u=0,p=i(this),h=n,m=t.split(f);c=m[u++];)h=o?h:!p.hasClass(c),p[h?"addClass":"removeClass"](c);else"undefined"!==r&&"boolean"!==r||(this.className&&i.data(this,"__className__",this.className),this.className=this.className||!1===t?"":i.data(this,"__className__")||"")}))},hasClass:function(t){t=" "+t+" ";for(var n=0,r=this.length;n<r;n++)if((" "+this[n].className+" ").replace(u," ").indexOf(t)>-1)return!0;return!1},val:function(t){if(!arguments.length){var r=this[0];if(r){if(i.nodeName(r,"option")){var o=r.attributes.value;return!o||o.specified?r.value:r.text}if(i.nodeName(r,"select")){var c=r.selectedIndex;o=[];var u=r.options;if(r="select-one"===r.type,c<0)return null;var f=r?c:0;for(c=r?c+1:u.length;f<c;f++){var h=u[f];if(h.selected&&(i.support.optDisabled?!h.disabled:null===h.getAttribute("disabled"))&&(!h.parentNode.disabled||!i.nodeName(h.parentNode,"optgroup"))){if(t=i(h).val(),r)return t;o.push(t)}}return o}return x.test(r.type)&&!i.support.checkOn?null===r.getAttribute("value")?"on":r.value:(r.value||"").replace(p,"")}return n}var m=i.isFunction(t);return this.each((function(n){var r=i(this),o=t;if(1===this.nodeType)if(m&&(o=t.call(this,n,r.val())),null==o?o="":"number"==typeof o?o+="":i.isArray(o)&&(o=i.map(o,(function(t){return null==t?"":t+""}))),i.isArray(o)&&x.test(this.type))this.checked=i.inArray(r.val(),o)>=0;else if(i.nodeName(this,"select")){var c=i.makeArray(o);i("option",this).each((function(){this.selected=i.inArray(i(this).val(),c)>=0})),c.length||(this.selectedIndex=-1)}else this.value=o}))}}),i.extend({attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(t,r,o,c){if(!t||3===t.nodeType||8===t.nodeType)return n;if(c&&r in i.attrFn)return i(t)[r](o);c=1!==t.nodeType||!i.isXMLDoc(t);var u=o!==n;if(r=c&&i.props[r]||r,1===t.nodeType){var f=h.test(r);return!(r in t)&&t[r]===n||!c||f?!i.support.style&&c&&"style"===r?(u&&(t.style.cssText=""+o),t.style.cssText):(u&&t.setAttribute(r,""+o),t.attributes[r]||!t.hasAttribute||t.hasAttribute(r)?null===(t=!i.support.hrefNormalized&&c&&f?t.getAttribute(r,2):t.getAttribute(r))?n:t:n):(u&&("type"===r&&m.test(t.nodeName)&&t.parentNode&&i.error("type property can't be changed"),null===o?1===t.nodeType&&t.removeAttribute(r):t[r]=o),i.nodeName(t,"form")&&t.getAttributeNode(r)?t.getAttributeNode(r).nodeValue:"tabIndex"===r?(r=t.getAttributeNode("tabIndex"))&&r.specified?r.value:g.test(t.nodeName)||y.test(t.nodeName)&&t.href?0:n:t[r])}}});var T=/\.(.*)$/,N=/^(?:textarea|input|select)$/i,w=/\./g,E=/ /g,C=/[^\w\s.|`]/g,Va=function(t){return t.replace(C,"\\$&")},A={focusin:0,focusout:0};i.event={add:function(r,o,c,u){var f,p;if(3!==r.nodeType&&8!==r.nodeType&&(i.isWindow(r)&&r!==t&&!r.frameElement&&(r=t),!1===c&&(c=U),c.handler&&(c=(f=c).handler),c.guid||(c.guid=i.guid++),p=i.data(r))){var h=r.nodeType?"events":"__events__",m=p[h],g=p.handle;"function"==typeof m?(g=m.handle,m=m.events):m||(r.nodeType||(p[h]=p=function(){}),p.events=m={}),g||(p.handle=g=function(){return void 0===i||i.event.triggered?n:i.event.handle.apply(g.elem,arguments)}),g.elem=r,o=o.split(" ");for(var y,x=0;h=o[x++];){p=f?i.extend({},f):{handler:c,data:u},h.indexOf(".")>-1?(y=h.split("."),h=y.shift(),p.namespace=y.slice(0).sort().join(".")):(y=[],p.namespace=""),p.type=h,p.guid||(p.guid=c.guid);var T=m[h],N=i.event.special[h]||{};T||(T=m[h]=[],N.setup&&!1!==N.setup.call(r,u,y,g)||(r.addEventListener?r.addEventListener(h,g,!1):r.attachEvent&&r.attachEvent("on"+h,g))),N.add&&(N.add.call(r,p),p.handler.guid||(p.handler.guid=c.guid)),T.push(p),i.event.global[h]=!0}r=null}},global:{},remove:function(t,n,r,o){if(3!==t.nodeType&&8!==t.nodeType){!1===r&&(r=U);var c,u,f,p,h,m,g,y,x=0,T=t.nodeType?"events":"__events__",N=i.data(t),w=N&&N[T];if(N&&w)if("function"==typeof w&&(N=w,w=w.events),n&&n.type&&(r=n.handler,n=n.type),!n||"string"==typeof n&&"."===n.charAt(0))for(c in n=n||"",w)i.event.remove(t,c+n);else{for(n=n.split(" ");c=n[x++];)if(m=c,p=[],(f=c.indexOf(".")<0)||(p=c.split("."),c=p.shift(),h=RegExp("(^|\\.)"+i.map(p.slice(0).sort(),Va).join("\\.(?:.*\\.)?")+"(\\.|$)")),g=w[c])if(r){for(m=i.event.special[c]||{},u=o||0;u<g.length&&(y=g[u],r.guid!==y.guid||((f||h.test(y.namespace))&&(null==o&&g.splice(u--,1),m.remove&&m.remove.call(t,y)),null==o));u++);(0===g.length||null!=o&&1===g.length)&&(m.teardown&&!1!==m.teardown.call(t,p)||i.removeEvent(t,c,N.handle),delete w[c])}else for(u=0;u<g.length;u++)y=g[u],(f||h.test(y.namespace))&&(i.event.remove(t,m,y.handler,u),g.splice(u--,1));i.isEmptyObject(w)&&((n=N.handle)&&(n.elem=null),delete N.events,delete N.handle,"function"==typeof N?i.removeData(t,T):i.isEmptyObject(N)&&i.removeData(t))}}},trigger:function(t,r,o,c){var u=t.type||t;if(!c){if(t="object"==typeof t?t[i.expando]?t:i.extend(i.Event(u),t):i.Event(u),u.indexOf("!")>=0&&(t.type=u=u.slice(0,-1),t.exclusive=!0),o||(t.stopPropagation(),i.event.global[u]&&i.each(i.cache,(function(){this.events&&this.events[u]&&i.event.trigger(t,r,this.handle.elem)}))),!o||3===o.nodeType||8===o.nodeType)return n;t.result=n,t.target=o,(r=i.makeArray(r)).unshift(t)}t.currentTarget=o,(c=o.nodeType?i.data(o,"handle"):(i.data(o,"__events__")||{}).handle)&&c.apply(o,r),c=o.parentNode||o.ownerDocument;try{o&&o.nodeName&&i.noData[o.nodeName.toLowerCase()]||o["on"+u]&&!1===o["on"+u].apply(o,r)&&(t.result=!1,t.preventDefault())}catch(t){}if(!t.isPropagationStopped()&&c)i.event.trigger(t,r,c,!0);else if(!t.isDefaultPrevented()){c=t.target;var f,p=u.replace(T,""),h=i.nodeName(c,"a")&&"click"===p,m=i.event.special[p]||{};if(!(m._default&&!1!==m._default.call(o,t)||h||c&&c.nodeName&&i.noData[c.nodeName.toLowerCase()])){try{c[p]&&((f=c["on"+p])&&(c["on"+p]=null),i.event.triggered=!0,c[p]())}catch(t){}f&&(c["on"+p]=f),i.event.triggered=!1}}},handle:function(r){var o,c,u;c=[];var f,p=i.makeArray(arguments);if((r=p[0]=i.event.fix(r||t.event)).currentTarget=this,(o=r.type.indexOf(".")<0&&!r.exclusive)||(u=r.type.split("."),r.type=u.shift(),c=u.slice(0).sort(),u=RegExp("(^|\\.)"+c.join("\\.(?:.*\\.)?")+"(\\.|$)")),r.namespace=r.namespace||c.join("."),"function"==typeof(f=i.data(this,this.nodeType?"events":"__events__"))&&(f=f.events),c=(f||{})[r.type],f&&c){f=0;for(var h=(c=c.slice(0)).length;f<h;f++){var m=c[f];if((o||u.test(m.namespace))&&(r.handler=m.handler,r.data=m.data,r.handleObj=m,(m=m.handler.apply(this,p))!==n&&(r.result=m,!1===m&&(r.preventDefault(),r.stopPropagation())),r.isImmediatePropagationStopped()))break}}return r.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(t){if(t[i.expando])return t;var o=t;t=i.Event(o);for(var c,u=this.props.length;u;)t[c=this.props[--u]]=o[c];return t.target||(t.target=t.srcElement||r),3===t.target.nodeType&&(t.target=t.target.parentNode),!t.relatedTarget&&t.fromElement&&(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),null==t.pageX&&null!=t.clientX&&(o=r.documentElement,u=r.body,t.pageX=t.clientX+(o&&o.scrollLeft||u&&u.scrollLeft||0)-(o&&o.clientLeft||u&&u.clientLeft||0),t.pageY=t.clientY+(o&&o.scrollTop||u&&u.scrollTop||0)-(o&&o.clientTop||u&&u.clientTop||0)),null!=t.which||null==t.charCode&&null==t.keyCode||(t.which=null!=t.charCode?t.charCode:t.keyCode),!t.metaKey&&t.ctrlKey&&(t.metaKey=t.ctrlKey),t.which||t.button===n||(t.which=1&t.button?1:2&t.button?3:4&t.button?2:0),t},guid:1e8,proxy:i.proxy,special:{ready:{setup:i.bindReady,teardown:i.noop},live:{add:function(t){i.event.add(this,Y(t.origType,t.selector),i.extend({},t,{handler:Ga,guid:t.handler.guid}))},remove:function(t){i.event.remove(this,Y(t.origType,t.selector),t)}},beforeunload:{setup:function(t,n,r){i.isWindow(this)&&(this.onbeforeunload=r)},teardown:function(t,n){this.onbeforeunload===n&&(this.onbeforeunload=null)}}}},i.removeEvent=r.removeEventListener?function(t,n,r){t.removeEventListener&&t.removeEventListener(n,r,!1)}:function(t,n,r){t.detachEvent&&t.detachEvent("on"+n,r)},i.Event=function(t){if(!this.preventDefault)return new i.Event(t);t&&t.type?(this.originalEvent=t,this.type=t.type):this.type=t,this.timeStamp=i.now(),this[i.expando]=!0},i.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ba;var t=this.originalEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=ba;var t=this.originalEvent;t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ba,this.stopPropagation()},isDefaultPrevented:U,isPropagationStopped:U,isImmediatePropagationStopped:U};var ta=function(t){var n=t.relatedTarget;try{for(;n&&n!==this;)n=n.parentNode;n!==this&&(t.type=t.data,i.event.handle.apply(this,arguments))}catch(t){}},ua=function(t){t.type=t.data,i.event.handle.apply(this,arguments)};if(i.each({mouseenter:"mouseover",mouseleave:"mouseout"},(function(t,n){i.event.special[t]={setup:function(r){i.event.add(this,n,r&&r.selector?ua:ta,t)},teardown:function(t){i.event.remove(this,n,t&&t.selector?ua:ta)}}})),i.support.submitBubbles||(i.event.special.submit={setup:function(){if("form"===this.nodeName.toLowerCase())return!1;i.event.add(this,"click.specialSubmit",(function(t){var r=t.target,o=r.type;if(("submit"===o||"image"===o)&&i(r).closest("form").length)return t.liveFired=n,ja("submit",this,arguments)})),i.event.add(this,"keypress.specialSubmit",(function(t){var r=t.target,o=r.type;if(("text"===o||"password"===o)&&i(r).closest("form").length&&13===t.keyCode)return t.liveFired=n,ja("submit",this,arguments)}))},teardown:function(){i.event.remove(this,".specialSubmit")}}),!i.support.changeBubbles){var j,va=function(t){var n=t.type,r=t.value;return"radio"===n||"checkbox"===n?r=t.checked:"select-multiple"===n?r=t.selectedIndex>-1?i.map(t.options,(function(t){return t.selected})).join("-"):"":"select"===t.nodeName.toLowerCase()&&(r=t.selectedIndex),r},Z=function(t,r){var o,c,u=t.target;if(N.test(u.nodeName)&&!u.readOnly&&(o=i.data(u,"_change_data"),c=va(u),"focusout"===t.type&&"radio"===u.type||i.data(u,"_change_data",c),o!==n&&c!==o&&(null!=o||c)))return t.type="change",t.liveFired=n,i.event.trigger(t,r,u)};i.event.special.change={filters:{focusout:Z,beforedeactivate:Z,click:function(t){var n=t.target,r=n.type;if("radio"===r||"checkbox"===r||"select"===n.nodeName.toLowerCase())return Z.call(this,t)},keydown:function(t){var n=t.target,r=n.type;if(13===t.keyCode&&"textarea"!==n.nodeName.toLowerCase()||32===t.keyCode&&("checkbox"===r||"radio"===r)||"select-multiple"===r)return Z.call(this,t)},beforeactivate:function(t){t=t.target,i.data(t,"_change_data",va(t))}},setup:function(){if("file"===this.type)return!1;for(var t in j)i.event.add(this,t+".specialChange",j[t]);return N.test(this.nodeName)},teardown:function(){return i.event.remove(this,".specialChange"),N.test(this.nodeName)}},(j=i.event.special.change.filters).focus=j.beforeactivate}r.addEventListener&&i.each({focus:"focusin",blur:"focusout"},(function(t,n){function d(t){return(t=i.event.fix(t)).type=n,i.event.trigger(t,null,t.target)}i.event.special[n]={setup:function(){0==A[n]++&&r.addEventListener(t,d,!0)},teardown:function(){0==--A[n]&&r.removeEventListener(t,d,!0)}}})),i.each(["bind","one"],(function(t,r){i.fn[r]=function(t,o,c){if("object"==typeof t){for(var u in t)this[r](u,o,t[u],c);return this}(i.isFunction(o)||!1===o)&&(c=o,o=n);var f="one"===r?i.proxy(c,(function(t){return i(this).unbind(t,f),c.apply(this,arguments)})):c;if("unload"===t&&"one"!==r)this.one(t,o,c);else{u=0;for(var p=this.length;u<p;u++)i.event.add(this[u],t,f,o)}return this}})),i.fn.extend({unbind:function(t,n){if("object"!=typeof t||t.preventDefault){o=0;for(var r=this.length;o<r;o++)i.event.remove(this[o],t,n)}else for(var o in t)this.unbind(o,t[o]);return this},delegate:function(t,n,r,i){return this.live(n,r,i,t)},undelegate:function(t,n,r){return 0===arguments.length?this.unbind("live"):this.die(n,null,r,t)},trigger:function(t,n){return this.each((function(){i.event.trigger(t,n,this)}))},triggerHandler:function(t,n){if(this[0]){var r=i.Event(t);return r.preventDefault(),r.stopPropagation(),i.event.trigger(r,n,this[0]),r.result}},toggle:function(t){for(var n=arguments,r=1;r<n.length;)i.proxy(t,n[r++]);return this.click(i.proxy(t,(function(o){var c=(i.data(this,"lastToggle"+t.guid)||0)%r;return i.data(this,"lastToggle"+t.guid,c+1),o.preventDefault(),n[c].apply(this,arguments)||!1})))},hover:function(t,n){return this.mouseenter(t).mouseleave(n||t)}});var F={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};i.each(["live","die"],(function(t,r){i.fn[r]=function(t,o,c,u){var f,p,h,m=0,g=u||this.selector;if(u=u?this:i(this.context),"object"==typeof t&&!t.preventDefault){for(f in t)u[r](f,o,t[f],g);return this}for(i.isFunction(o)&&(c=o,o=n),t=(t||"").split(" ");null!=(f=t[m++]);)if(h="",(p=T.exec(f))&&(h=p[0],f=f.replace(T,"")),"hover"===f)t.push("mouseenter"+h,"mouseleave"+h);else if(p=f,"focus"===f||"blur"===f?(t.push(F[f]+h),f+=h):f=(F[f]||f)+h,"live"===r){h=0;for(var y=u.length;h<y;h++)i.event.add(u[h],"live."+Y(f,g),{data:o,selector:g,handler:c,origType:f,origHandler:c,preType:p})}else u.unbind("live."+Y(f,g),c);return this}})),i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),(function(t,n){i.fn[n]=function(t,r){return null==r&&(r=t,t=null),arguments.length>0?this.bind(n,t,r):this.trigger(n)},i.attrFn&&(i.attrFn[n]=!0)})),t.attachEvent&&!t.addEventListener&&i(t).bind("unload",(function(){for(var t in i.cache)if(i.cache[t].handle)try{i.event.remove(i.cache[t].handle.elem)}catch(t){}})),function(){function a(t,n,r,i,o,c){o=0;for(var u=i.length;o<u;o++){var f=i[o];if(f){f=f[t];for(var p=!1;f;){if(f.sizcache===r){p=i[f.sizset];break}if(1!==f.nodeType||c||(f.sizcache=r,f.sizset=o),f.nodeName.toLowerCase()===n){p=f;break}f=f[t]}i[o]=p}}}function b(t,n,r,i,o,c){o=0;for(var u=i.length;o<u;o++){var f=i[o];if(f){f=f[t];for(var p=!1;f;){if(f.sizcache===r){p=i[f.sizset];break}if(1===f.nodeType)if(c||(f.sizcache=r,f.sizset=o),"string"!=typeof n){if(f===n){p=!0;break}}else if(l.filter(n,[f]).length>0){p=f;break}f=f[t]}i[o]=p}}}var t=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o=0,c=Object.prototype.toString,u=!1,f=!0;[0,0].sort((function(){return f=!1,0}));var l=function(n,i,o,u){o=o||[];var f=i=i||r;if(1!==i.nodeType&&9!==i.nodeType)return[];if(!n||"string"!=typeof n)return o;var p,g,y,x,T,N=[],w=!0,E=l.isXML(i),C=n;do{if(t.exec(""),(p=t.exec(C))&&(C=p[3],N.push(p[1]),p[2])){x=p[3];break}}while(p);if(N.length>1&&m.exec(n))if(2===N.length&&h.relative[N[0]])g=M(N[0]+N[1],i);else for(g=h.relative[N[0]]?[i]:l(N.shift(),i);N.length;)n=N.shift(),h.relative[n]&&(n+=N.shift()),g=M(n,g);else if(!u&&N.length>1&&9===i.nodeType&&!E&&h.match.ID.test(N[0])&&!h.match.ID.test(N[N.length-1])&&(i=(p=l.find(N.shift(),i,E)).expr?l.filter(p.expr,p.set)[0]:p.set[0]),i)for(g=(p=u?{expr:N.pop(),set:D(u)}:l.find(N.pop(),1!==N.length||"~"!==N[0]&&"+"!==N[0]||!i.parentNode?i:i.parentNode,E)).expr?l.filter(p.expr,p.set):p.set,N.length>0?y=D(g):w=!1;N.length;)p=T=N.pop(),h.relative[T]?p=N.pop():T="",null==p&&(p=i),h.relative[T](y,p,E);else y=[];if(y||(y=g),y||l.error(T||n),"[object Array]"===c.call(y))if(w)if(i&&1===i.nodeType)for(n=0;null!=y[n];n++)y[n]&&(!0===y[n]||1===y[n].nodeType&&l.contains(i,y[n]))&&o.push(g[n]);else for(n=0;null!=y[n];n++)y[n]&&1===y[n].nodeType&&o.push(g[n]);else o.push.apply(o,y);else D(y,o);return x&&(l(x,f,o,u),l.uniqueSort(o)),o};l.uniqueSort=function(t){if(g&&(u=f,t.sort(g),u))for(var n=1;n<t.length;n++)t[n]===t[n-1]&&t.splice(n--,1);return t},l.matches=function(t,n){return l(t,null,null,n)},l.matchesSelector=function(t,n){return l(n,null,null,[t]).length>0},l.find=function(t,n,r){var i;if(!t)return[];for(var o=0,c=h.order.length;o<c;o++){var u,f=h.order[o];if(u=h.leftMatch[f].exec(t)){var p=u[1];if(u.splice(1,1),"\\"!==p.substr(p.length-1)&&(u[1]=(u[1]||"").replace(/\\/g,""),null!=(i=h.find[f](u,n,r)))){t=t.replace(h.match[f],"");break}}}return i||(i=n.getElementsByTagName("*")),{set:i,expr:t}},l.filter=function(t,r,i,o){for(var c,u,f=t,p=[],m=r,g=r&&r[0]&&l.isXML(r[0]);t&&r.length;){for(var y in h.filter)if(null!=(c=h.leftMatch[y].exec(t))&&c[2]){var x,T,N=h.filter[y];if(T=c[1],u=!1,c.splice(1,1),"\\"!==T.substr(T.length-1)){if(m===p&&(p=[]),h.preFilter[y])if(c=h.preFilter[y](c,m,i,p,o,g)){if(!0===c)continue}else u=x=!0;if(c)for(var w=0;null!=(T=m[w]);w++)if(T){var E=o^!!(x=N(T,c,w,m));i&&null!=x?E?u=!0:m[w]=!1:E&&(p.push(T),u=!0)}if(x!==n){if(i||(m=p),t=t.replace(h.match[y],""),!u)return[];break}}}if(t===f){if(null!=u)break;l.error(t)}f=t}return m},l.error=function(t){throw"Syntax error, unrecognized expression: "+t};var p,h=l.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(t){return t.getAttribute("href")}},relative:{"+":function(t,n){var r="string"==typeof n,i=r&&!/\W/.test(n);r=r&&!i,i&&(n=n.toLowerCase()),i=0;for(var o,c=t.length;i<c;i++)if(o=t[i]){for(;(o=o.previousSibling)&&1!==o.nodeType;);t[i]=r||o&&o.nodeName.toLowerCase()===n?o||!1:o===n}r&&l.filter(n,t,!0)},">":function(t,n){var r,i="string"==typeof n,o=0,c=t.length;if(i&&!/\W/.test(n))for(n=n.toLowerCase();o<c;o++)(r=t[o])&&(i=r.parentNode,t[o]=i.nodeName.toLowerCase()===n&&i);else{for(;o<c;o++)(r=t[o])&&(t[o]=i?r.parentNode:r.parentNode===n);i&&l.filter(n,t,!0)}},"":function(t,n,r){var i,c=o++,u=b;"string"!=typeof n||/\W/.test(n)||(i=n=n.toLowerCase(),u=a),u("parentNode",n,c,t,i,r)},"~":function(t,n,r){var i,c=o++,u=b;"string"!=typeof n||/\W/.test(n)||(i=n=n.toLowerCase(),u=a),u("previousSibling",n,c,t,i,r)}},find:{ID:function(t,n,r){if(void 0!==n.getElementById&&!r)return(t=n.getElementById(t[1]))&&t.parentNode?[t]:[]},NAME:function(t,n){if(void 0!==n.getElementsByName){for(var r=[],i=n.getElementsByName(t[1]),o=0,c=i.length;o<c;o++)i[o].getAttribute("name")===t[1]&&r.push(i[o]);return 0===r.length?null:r}},TAG:function(t,n){return n.getElementsByTagName(t[1])}},preFilter:{CLASS:function(t,n,r,i,o,c){if(t=" "+t[1].replace(/\\/g,"")+" ",c)return t;c=0;for(var u;null!=(u=n[c]);c++)u&&(o^(u.className&&(" "+u.className+" ").replace(/[\t\n]/g," ").indexOf(t)>=0)?r||i.push(u):r&&(n[c]=!1));return!1},ID:function(t){return t[1].replace(/\\/g,"")},TAG:function(t){return t[1].toLowerCase()},CHILD:function(t){if("nth"===t[1]){var n=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(("even"===t[2]?"2n":"odd"===t[2]&&"2n+1")||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=n[1]+(n[2]||1)-0,t[3]=n[3]-0}return t[0]=o++,t},ATTR:function(t,n,r,i,o,c){return n=t[1].replace(/\\/g,""),!c&&h.attrMap[n]&&(t[1]=h.attrMap[n]),"~="===t[2]&&(t[4]=" "+t[4]+" "),t},PSEUDO:function(n,r,i,o,c){if("not"===n[1]){if(!((t.exec(n[3])||"").length>1||/^\w/.test(n[3])))return n=l.filter(n[3],r,i,!0^c),i||o.push.apply(o,n),!1;n[3]=l(n[3],null,null,r)}else if(h.match.POS.test(n[0])||h.match.CHILD.test(n[0]))return!0;return n},POS:function(t){return t.unshift(!0),t}},filters:{enabled:function(t){return!1===t.disabled&&"hidden"!==t.type},disabled:function(t){return!0===t.disabled},checked:function(t){return!0===t.checked},selected:function(t){return!0===t.selected},parent:function(t){return!!t.firstChild},empty:function(t){return!t.firstChild},has:function(t,n,r){return!!l(r[3],t).length},header:function(t){return/h\d/i.test(t.nodeName)},text:function(t){return"text"===t.type},radio:function(t){return"radio"===t.type},checkbox:function(t){return"checkbox"===t.type},file:function(t){return"file"===t.type},password:function(t){return"password"===t.type},submit:function(t){return"submit"===t.type},image:function(t){return"image"===t.type},reset:function(t){return"reset"===t.type},button:function(t){return"button"===t.type||"button"===t.nodeName.toLowerCase()},input:function(t){return/input|select|textarea|button/i.test(t.nodeName)}},setFilters:{first:function(t,n){return 0===n},last:function(t,n,r,i){return n===i.length-1},even:function(t,n){return n%2==0},odd:function(t,n){return n%2==1},lt:function(t,n,r){return n<r[3]-0},gt:function(t,n,r){return n>r[3]-0},nth:function(t,n,r){return r[3]-0===n},eq:function(t,n,r){return r[3]-0===n}},filter:{PSEUDO:function(t,n,r,i){var o=n[1],c=h.filters[o];if(c)return c(t,r,n,i);if("contains"===o)return(t.textContent||t.innerText||l.getText([t])||"").indexOf(n[3])>=0;if("not"===o){for(r=0,i=(n=n[3]).length;r<i;r++)if(n[r]===t)return!1;return!0}l.error("Syntax error, unrecognized expression: "+o)},CHILD:function(t,n){var r=n[1],i=t;switch(r){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===r)return!0;i=t;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0;case"nth":r=n[2];var o=n[3];if(1===r&&0===o)return!0;var c=n[0],u=t.parentNode;if(u&&(u.sizcache!==c||!t.nodeIndex)){var f=0;for(i=u.firstChild;i;i=i.nextSibling)1===i.nodeType&&(i.nodeIndex=++f);u.sizcache=c}return i=t.nodeIndex-o,0===r?0===i:i%r==0&&i/r>=0}},ID:function(t,n){return 1===t.nodeType&&t.getAttribute("id")===n},TAG:function(t,n){return"*"===n&&1===t.nodeType||t.nodeName.toLowerCase()===n},CLASS:function(t,n){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(n)>-1},ATTR:function(t,n){var r=n[1],i=(r=h.attrHandle[r]?h.attrHandle[r](t):null!=t[r]?t[r]:t.getAttribute(r))+"",o=n[2],c=n[4];return null==r?"!="===o:"="===o?i===c:"*="===o?i.indexOf(c)>=0:"~="===o?(" "+i+" ").indexOf(c)>=0:c?"!="===o?i!==c:"^="===o?0===i.indexOf(c):"$="===o?i.substr(i.length-c.length)===c:"|="===o&&(i===c||i.substr(0,c.length+1)===c+"-"):i&&!1!==r},POS:function(t,n,r,i){var o=h.setFilters[n[2]];if(o)return o(t,r,n,i)}}},m=h.match.POS,v=function(t,n){return"\\"+(n-0+1)};for(p in h.match)h.match[p]=RegExp(h.match[p].source+/(?![^\[]*\])(?![^\(]*\))/.source),h.leftMatch[p]=RegExp(/(^(?:.|\r|\n)*?)/.source+h.match[p].source.replace(/\\(\d+)/g,v));var g,y,x,D=function(t,n){return t=Array.prototype.slice.call(t,0),n?(n.push.apply(n,t),n):t};try{Array.prototype.slice.call(r.documentElement.childNodes,0)}catch(t){D=function(t,n){var r=n||[],i=0;if("[object Array]"===c.call(t))Array.prototype.push.apply(r,t);else if("number"==typeof t.length)for(var o=t.length;i<o;i++)r.push(t[i]);else for(;t[i];i++)r.push(t[i]);return r}}r.documentElement.compareDocumentPosition?g=function(t,n){return t===n?(u=!0,0):t.compareDocumentPosition&&n.compareDocumentPosition?4&t.compareDocumentPosition(n)?-1:1:t.compareDocumentPosition?-1:1}:(g=function(t,n){var r=[],i=[],o=t.parentNode,c=n.parentNode,f=o;if(t===n)return u=!0,0;if(o===c)return y(t,n);if(!o)return-1;if(!c)return 1;for(;f;)r.unshift(f),f=f.parentNode;for(f=c;f;)i.unshift(f),f=f.parentNode;for(o=r.length,c=i.length,f=0;f<o&&f<c;f++)if(r[f]!==i[f])return y(r[f],i[f]);return f===o?y(t,i[f],-1):y(r[f],n,1)},y=function(t,n,r){if(t===n)return r;for(t=t.nextSibling;t;){if(t===n)return-1;t=t.nextSibling}return 1}),l.getText=function(t){for(var n,r="",i=0;t[i];i++)3===(n=t[i]).nodeType||4===n.nodeType?r+=n.nodeValue:8!==n.nodeType&&(r+=l.getText(n.childNodes));return r},function(){var t=r.createElement("div"),i="script"+(new Date).getTime();t.innerHTML="<a name='"+i+"'/>";var o=r.documentElement;o.insertBefore(t,o.firstChild),r.getElementById(i)&&(h.find.ID=function(t,r,i){if(void 0!==r.getElementById&&!i)return(r=r.getElementById(t[1]))?r.id===t[1]||void 0!==r.getAttributeNode&&r.getAttributeNode("id").nodeValue===t[1]?[r]:n:[]},h.filter.ID=function(t,n){var r=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return 1===t.nodeType&&r&&r.nodeValue===n}),o.removeChild(t),o=t=null}(),(x=r.createElement("div")).appendChild(r.createComment("")),x.getElementsByTagName("*").length>0&&(h.find.TAG=function(t,n){var r=n.getElementsByTagName(t[1]);if("*"===t[1]){for(var i=[],o=0;r[o];o++)1===r[o].nodeType&&i.push(r[o]);r=i}return r}),x.innerHTML="<a href='#'></a>",x.firstChild&&void 0!==x.firstChild.getAttribute&&"#"!==x.firstChild.getAttribute("href")&&(h.attrHandle.href=function(t){return t.getAttribute("href",2)}),x=null,r.querySelectorAll&&function(){var t=l,n=r.createElement("div");if(n.innerHTML="<p class='TEST'></p>",!n.querySelectorAll||0!==n.querySelectorAll(".TEST").length){for(var i in l=function(n,i,o,c){if(i=i||r,!c&&!l.isXML(i))if(9===i.nodeType)try{return D(i.querySelectorAll(n),o)}catch(t){}else if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){var u=i.id,f=i.id="__sizzle__";try{return D(i.querySelectorAll("#"+f+" "+n),o)}catch(t){}finally{u?i.id=u:i.removeAttribute("id")}}return t(n,i,o,c)},t)l[i]=t[i];n=null}}(),function(){var t=r.documentElement,n=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.msMatchesSelector,i=!1;try{n.call(r.documentElement,":sizzle")}catch(t){i=!0}n&&(l.matchesSelector=function(t,r){try{if(i||!h.match.PSEUDO.test(r))return n.call(t,r)}catch(t){}return l(r,null,null,[t]).length>0})}(),function(){var t=r.createElement("div");t.innerHTML="<div class='test e'></div><div class='test'></div>",t.getElementsByClassName&&0!==t.getElementsByClassName("e").length&&(t.lastChild.className="e",1!==t.getElementsByClassName("e").length&&(h.order.splice(1,0,"CLASS"),h.find.CLASS=function(t,n,r){if(void 0!==n.getElementsByClassName&&!r)return n.getElementsByClassName(t[1])},t=null))}(),l.contains=r.documentElement.contains?function(t,n){return t!==n&&(!t.contains||t.contains(n))}:function(t,n){return!!(16&t.compareDocumentPosition(n))},l.isXML=function(t){return!!(t=(t?t.ownerDocument||t:0).documentElement)&&"HTML"!==t.nodeName};var M=function(t,n){for(var r,i=[],o="",c=n.nodeType?[n]:n;r=h.match.PSEUDO.exec(t);)o+=r[0],t=t.replace(h.match.PSEUDO,"");t=h.relative[t]?t+"*":t,r=0;for(var u=c.length;r<u;r++)l(t,c[r],i);return l.filter(o,i)};i.find=l,i.expr=l.selectors,i.expr[":"]=i.expr.filters,i.unique=l.uniqueSort,i.text=l.getText,i.isXMLDoc=l.isXML,i.contains=l.contains}();var k=/Until$/,L=/^(?:parents|prevUntil|prevAll)/,O=/,/,B=/^.[^:#\[\.,]*$/,H=Array.prototype.slice,P=i.expr.match.POS;i.fn.extend({find:function(t){for(var n=this.pushStack("","find",t),r=0,o=0,c=this.length;o<c;o++)if(r=n.length,i.find(t,this[o],n),o>0)for(var u=r;u<n.length;u++)for(var f=0;f<r;f++)if(n[f]===n[u]){n.splice(u--,1);break}return n},has:function(t){var n=i(t);return this.filter((function(){for(var t=0,r=n.length;t<r;t++)if(i.contains(this,n[t]))return!0}))},not:function(t){return this.pushStack(ka(this,t,!1),"not",t)},filter:function(t){return this.pushStack(ka(this,t,!0),"filter",t)},is:function(t){return!!t&&i.filter(t,this).length>0},closest:function(t,n){var r,o,c=[],u=this[0];if(i.isArray(t)){var f,p={},h=1;if(u&&t.length){for(r=0,o=t.length;r<o;r++)p[f=t[r]]||(p[f]=i.expr.match.POS.test(f)?i(f,n||this.context):f);for(;u&&u.ownerDocument&&u!==n;){for(f in p)((r=p[f]).jquery?r.index(u)>-1:i(u).is(r))&&c.push({selector:f,elem:u,level:h});u=u.parentNode,h++}}return c}for(p=P.test(t)?i(t,n||this.context):null,r=0,o=this.length;r<o;r++)for(u=this[r];u;){if(p?p.index(u)>-1:i.find.matchesSelector(u,t)){c.push(u);break}if(!(u=u.parentNode)||!u.ownerDocument||u===n)break}return c=c.length>1?i.unique(c):c,this.pushStack(c,"closest",t)},index:function(t){return t&&"string"!=typeof t?i.inArray(t.jquery?t[0]:t,this):i.inArray(this[0],t?i(t):this.parent().children())},add:function(t,n){var r="string"==typeof t?i(t,n||this.context):i.makeArray(t),o=i.merge(this.get(),r);return this.pushStack(r[0]&&r[0].parentNode&&11!==r[0].parentNode.nodeType&&o[0]&&o[0].parentNode&&11!==o[0].parentNode.nodeType?i.unique(o):o)},andSelf:function(){return this.add(this.prevObject)}}),i.each({parent:function(t){return(t=t.parentNode)&&11!==t.nodeType?t:null},parents:function(t){return i.dir(t,"parentNode")},parentsUntil:function(t,n,r){return i.dir(t,"parentNode",r)},next:function(t){return i.nth(t,2,"nextSibling")},prev:function(t){return i.nth(t,2,"previousSibling")},nextAll:function(t){return i.dir(t,"nextSibling")},prevAll:function(t){return i.dir(t,"previousSibling")},nextUntil:function(t,n,r){return i.dir(t,"nextSibling",r)},prevUntil:function(t,n,r){return i.dir(t,"previousSibling",r)},siblings:function(t){return i.sibling(t.parentNode.firstChild,t)},children:function(t){return i.sibling(t.firstChild)},contents:function(t){return i.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:i.makeArray(t.childNodes)}},(function(t,n){i.fn[t]=function(r,o){var c=i.map(this,n,r);return k.test(t)||(o=r),o&&"string"==typeof o&&(c=i.filter(o,c)),c=this.length>1?i.unique(c):c,(this.length>1||O.test(o))&&L.test(t)&&(c=c.reverse()),this.pushStack(c,t,H.call(arguments).join(","))}})),i.extend({filter:function(t,n,r){return r&&(t=":not("+t+")"),1===n.length?i.find.matchesSelector(n[0],t)?[n[0]]:[]:i.find.matches(t,n)},dir:function(t,r,o){var c=[];for(t=t[r];t&&9!==t.nodeType&&(o===n||1!==t.nodeType||!i(t).is(o));)1===t.nodeType&&c.push(t),t=t[r];return c},nth:function(t,n,r){n=n||1;for(var i=0;t&&(1!==t.nodeType||++i!==n);t=t[r]);return t},sibling:function(t,n){for(var r=[];t;t=t.nextSibling)1===t.nodeType&&t!==n&&r.push(t);return r}});var _=/ jQuery\d+="(?:\d+|null)"/g,q=/^\s+/,I=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,W=/<([\w:]+)/,$=/<tbody/i,z=/<|&#?\w+;/,R=/<(?:script|object|embed|option|style)/i,X=/checked\s*(?:[^=]|=\s*.checked.)/i,G=/\=([^="'>\s]+\/)>/g,V={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};V.optgroup=V.option,V.tbody=V.tfoot=V.colgroup=V.caption=V.thead,V.th=V.td,i.support.htmlSerialize||(V._default=[1,"div<div>","</div>"]),i.fn.extend({text:function(t){return i.isFunction(t)?this.each((function(n){var r=i(this);r.text(t.call(this,n,r.text()))})):"object"!=typeof t&&t!==n?this.empty().append((this[0]&&this[0].ownerDocument||r).createTextNode(t)):i.text(this)},wrapAll:function(t){if(i.isFunction(t))return this.each((function(n){i(this).wrapAll(t.call(this,n))}));if(this[0]){var n=i(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&n.insertBefore(this[0]),n.map((function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t})).append(this)}return this},wrapInner:function(t){return i.isFunction(t)?this.each((function(n){i(this).wrapInner(t.call(this,n))})):this.each((function(){var n=i(this),r=n.contents();r.length?r.wrapAll(t):n.append(t)}))},wrap:function(t){return this.each((function(){i(this).wrapAll(t)}))},unwrap:function(){return this.parent().each((function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)})).end()},append:function(){return this.domManip(arguments,!0,(function(t){1===this.nodeType&&this.appendChild(t)}))},prepend:function(){return this.domManip(arguments,!0,(function(t){1===this.nodeType&&this.insertBefore(t,this.firstChild)}))},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,(function(t){this.parentNode.insertBefore(t,this)}));if(arguments.length){var t=i(arguments[0]);return t.push.apply(t,this.toArray()),this.pushStack(t,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,(function(t){this.parentNode.insertBefore(t,this.nextSibling)}));if(arguments.length){var t=this.pushStack(this,"after",arguments);return t.push.apply(t,i(arguments[0]).toArray()),t}},remove:function(t,n){for(var r,o=0;null!=(r=this[o]);o++)t&&!i.filter(t,[r]).length||(n||1!==r.nodeType||(i.cleanData(r.getElementsByTagName("*")),i.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r));return this},empty:function(){for(var t,n=0;null!=(t=this[n]);n++)for(1===t.nodeType&&i.cleanData(t.getElementsByTagName("*"));t.firstChild;)t.removeChild(t.firstChild);return this},clone:function(t){var n=this.map((function(){if(i.support.noCloneEvent||i.isXMLDoc(this))return this.cloneNode(!0);var t=this.outerHTML,n=this.ownerDocument;return t||((t=n.createElement("div")).appendChild(this.cloneNode(!0)),t=t.innerHTML),i.clean([t.replace(_,"").replace(G,'="$1">').replace(q,"")],n)[0]}));return!0===t&&(la(this,n),la(this.find("*"),n.find("*"))),n},html:function(t){if(t===n)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(_,""):null;if("string"!=typeof t||R.test(t)||!i.support.leadingWhitespace&&q.test(t)||V[(W.exec(t)||["",""])[1].toLowerCase()])i.isFunction(t)?this.each((function(n){var r=i(this);r.html(t.call(this,n,r.html()))})):this.empty().append(t);else{t=t.replace(I,"<$1></$2>");try{for(var r=0,o=this.length;r<o;r++)1===this[r].nodeType&&(i.cleanData(this[r].getElementsByTagName("*")),this[r].innerHTML=t)}catch(n){this.empty().append(t)}}return this},replaceWith:function(t){return this[0]&&this[0].parentNode?i.isFunction(t)?this.each((function(n){var r=i(this),o=r.html();r.replaceWith(t.call(this,n,o))})):("string"!=typeof t&&(t=i(t).detach()),this.each((function(){var n=this.nextSibling,r=this.parentNode;i(this).remove(),n?i(n).before(t):i(r).append(t)}))):this.pushStack(i(i.isFunction(t)?t():t),"replaceWith",t)},detach:function(t){return this.remove(t,!0)},domManip:function(t,r,o){var c,u,f,p=t[0],h=[];if(!i.support.checkClone&&3===arguments.length&&"string"==typeof p&&X.test(p))return this.each((function(){i(this).domManip(t,r,o,!0)}));if(i.isFunction(p))return this.each((function(c){var u=i(this);t[0]=p.call(this,c,r?u.html():n),u.domManip(t,r,o)}));if(this[0]){if(c=p&&p.parentNode,u=1===(f=(c=i.support.parentNode&&c&&11===c.nodeType&&c.childNodes.length===this.length?{fragment:c}:i.buildFragment(t,this,h)).fragment).childNodes.length?f=f.firstChild:f.firstChild){r=r&&i.nodeName(u,"tr"),u=0;for(var m=this.length;u<m;u++)o.call(r&&i.nodeName(this[u],"table")?this[u].getElementsByTagName("tbody")[0]||this[u].appendChild(this[u].ownerDocument.createElement("tbody")):this[u],u>0||c.cacheable||this.length>1?f.cloneNode(!0):f)}h.length&&i.each(h,Ka)}return this}}),i.buildFragment=function(t,n,o){var c,u,f;return n=n&&n[0]?n[0].ownerDocument||n[0]:r,1===t.length&&"string"==typeof t[0]&&t[0].length<512&&n===r&&!R.test(t[0])&&(i.support.checkClone||!X.test(t[0]))&&(u=!0,(f=i.fragments[t[0]])&&1!==f&&(c=f)),c||(c=n.createDocumentFragment(),i.clean(t,n,c,o)),u&&(i.fragments[t[0]]=f?c:1),{fragment:c,cacheable:u}},i.fragments={},i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,n){i.fn[t]=function(r){var o=[];r=i(r);var c=1===this.length&&this[0].parentNode;if(c&&11===c.nodeType&&1===c.childNodes.length&&1===r.length)return r[n](this[0]),this;c=0;for(var u=r.length;c<u;c++){var f=(c>0?this.clone(!0):this).get();i(r[c])[n](f),o=o.concat(f)}return this.pushStack(o,t,r.selector)}})),i.extend({clean:function(t,n,o,c){void 0===(n=n||r).createElement&&(n=n.ownerDocument||n[0]&&n[0].ownerDocument||r);for(var u,f=[],p=0;null!=(u=t[p]);p++)if("number"==typeof u&&(u+=""),u){if("string"!=typeof u||z.test(u)){if("string"==typeof u){u=u.replace(I,"<$1></$2>");var h=(W.exec(u)||["",""])[1].toLowerCase(),m=V[h]||V._default,g=m[0],y=n.createElement("div");for(y.innerHTML=m[1]+u+m[2];g--;)y=y.lastChild;if(!i.support.tbody)for(g=$.test(u),m=(h="table"!==h||g?"<table>"!==m[1]||g?[]:y.childNodes:y.firstChild&&y.firstChild.childNodes).length-1;m>=0;--m)i.nodeName(h[m],"tbody")&&!h[m].childNodes.length&&h[m].parentNode.removeChild(h[m]);!i.support.leadingWhitespace&&q.test(u)&&y.insertBefore(n.createTextNode(q.exec(u)[0]),y.firstChild),u=y.childNodes}}else u=n.createTextNode(u);u.nodeType?f.push(u):f=i.merge(f,u)}if(o)for(p=0;f[p];p++)!c||!i.nodeName(f[p],"script")||f[p].type&&"text/javascript"!==f[p].type.toLowerCase()?(1===f[p].nodeType&&f.splice.apply(f,[p+1,0].concat(i.makeArray(f[p].getElementsByTagName("script")))),o.appendChild(f[p])):c.push(f[p].parentNode?f[p].parentNode.removeChild(f[p]):f[p]);return f},cleanData:function(t){for(var n,r,o,c=i.cache,u=i.event.special,f=i.support.deleteExpando,p=0;null!=(o=t[p]);p++)if((!o.nodeName||!i.noData[o.nodeName.toLowerCase()])&&(r=o[i.expando])){if((n=c[r])&&n.events)for(var h in n.events)u[h]?i.event.remove(o,h):i.removeEvent(o,h,n.handle);f?delete o[i.expando]:o.removeAttribute&&o.removeAttribute(i.expando),delete c[r]}}});var K,J=/alpha\([^)]*\)/i,Q=/opacity=([^)]*)/,ee=/-([a-z])/gi,te=/([A-Z])/g,ne=/^-?\d+(?:px)?$/i,re=/^-?\d/,ie={position:"absolute",visibility:"hidden",display:"block"},oe=["Left","Right"],ae=["Top","Bottom"],se=r.defaultView&&r.defaultView.getComputedStyle,jb=function(t,n){return n.toUpperCase()};i.fn.css=function(t,r){return 2===arguments.length&&r===n?this:i.access(this,t,r,!0,(function(t,r,o){return o!==n?i.style(t,r,o):i.css(t,r)}))},i.extend({cssHooks:{opacity:{get:function(t,n){if(n){var r=K(t,"opacity","opacity");return""===r?"1":r}return t.style.opacity}}},cssNumber:{zIndex:!0,fontWeight:!0,opacity:!0,zoom:!0,lineHeight:!0},cssProps:{float:i.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,r,o,c){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var u,f=i.camelCase(r),p=t.style,h=i.cssHooks[f];if(r=i.cssProps[f]||f,o===n)return h&&"get"in h&&(u=h.get(t,!1,c))!==n?u:p[r];if(!("number"==typeof o&&isNaN(o)||null==o||("number"!=typeof o||i.cssNumber[f]||(o+="px"),h&&"set"in h&&(o=h.set(t,o))===n)))try{p[r]=o}catch(t){}}},css:function(t,r,o){var c,u=i.camelCase(r),f=i.cssHooks[u];return r=i.cssProps[u]||u,f&&"get"in f&&(c=f.get(t,!0,o))!==n?c:K?K(t,r,u):void 0},swap:function(t,n,r){var i,o={};for(i in n)o[i]=t.style[i],t.style[i]=n[i];for(i in r.call(t),n)t.style[i]=o[i]},camelCase:function(t){return t.replace(ee,jb)}}),i.curCSS=i.css,i.each(["height","width"],(function(t,n){i.cssHooks[n]={get:function(t,r,o){var c;if(r)return 0!==t.offsetWidth?c=ma(t,n,o):i.swap(t,ie,(function(){c=ma(t,n,o)})),c+"px"},set:function(t,n){return ne.test(n)?(n=parseFloat(n))>=0?n+"px":void 0:n}}})),i.support.opacity||(i.cssHooks.opacity={get:function(t,n){return Q.test((n&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100+"":n?"1":""},set:function(t,n){var r=t.style;r.zoom=1;var o=i.isNaN(n)?"":"alpha(opacity="+100*n+")",c=r.filter||"";r.filter=J.test(c)?c.replace(J,o):r.filter+" "+o}}),se?K=function(t,r,o){var c;return o=o.replace(te,"-$1").toLowerCase(),(r=t.ownerDocument.defaultView)?((r=r.getComputedStyle(t,null))&&(""!==(c=r.getPropertyValue(o))||i.contains(t.ownerDocument.documentElement,t)||(c=i.style(t,o))),c):n}:r.documentElement.currentStyle&&(K=function(t,n){var r,i,o=t.currentStyle&&t.currentStyle[n],c=t.style;return!ne.test(o)&&re.test(o)&&(r=c.left,i=t.runtimeStyle.left,t.runtimeStyle.left=t.currentStyle.left,c.left="fontSize"===n?"1em":o||0,o=c.pixelLeft+"px",c.left=r,t.runtimeStyle.left=i),o}),i.expr&&i.expr.filters&&(i.expr.filters.hidden=function(t){var n=t.offsetHeight;return 0===t.offsetWidth&&0===n||!i.support.reliableHiddenOffsets&&"none"===(t.style.display||i.css(t,"display"))},i.expr.filters.visible=function(t){return!i.expr.filters.hidden(t)});var le=i.now(),ce=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ue=/^(?:select|textarea)/i,fe=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,de=/^(?:GET|HEAD|DELETE)$/,pe=/\[\]$/,he=/\=\?(&|$)/,me=/\?/,ge=/([?&])_=[^&]*/,ye=/^(\w+:)?\/\/([^\/?#]+)/,ve=/%20/g,be=/#.*$/,xe=i.fn.load;i.fn.extend({load:function(t,n,r){if("string"!=typeof t&&xe)return xe.apply(this,arguments);if(!this.length)return this;var o=t.indexOf(" ");if(o>=0){var c=t.slice(o,t.length);t=t.slice(0,o)}o="GET",n&&(i.isFunction(n)?(r=n,n=null):"object"==typeof n&&(n=i.param(n,i.ajaxSettings.traditional),o="POST"));var u=this;return i.ajax({url:t,type:o,dataType:"html",data:n,complete:function(t,n){"success"!==n&&"notmodified"!==n||u.html(c?i("<div>").append(t.responseText.replace(ce,"")).find(c):t.responseText),r&&u.each(r,[t.responseText,n,t])}}),this},serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map((function(){return this.elements?i.makeArray(this.elements):this})).filter((function(){return this.name&&!this.disabled&&(this.checked||ue.test(this.nodeName)||fe.test(this.type))})).map((function(t,n){var r=i(this).val();return null==r?null:i.isArray(r)?i.map(r,(function(t){return{name:n.name,value:t}})):{name:n.name,value:r}})).get()}}),i.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),(function(t,n){i.fn[n]=function(t){return this.bind(n,t)}})),i.extend({get:function(t,n,r,o){return i.isFunction(n)&&(o=o||r,r=n,n=null),i.ajax({type:"GET",url:t,data:n,success:r,dataType:o})},getScript:function(t,n){return i.get(t,null,n,"script")},getJSON:function(t,n,r){return i.get(t,n,r,"json")},post:function(t,n,r,o){return i.isFunction(n)&&(o=o||r,r=n,n={}),i.ajax({type:"POST",url:t,data:n,success:r,dataType:o})},ajaxSetup:function(t){i.extend(i.ajaxSettings,t)},ajaxSettings:{url:location.href,global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,xhr:function(){return new t.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(o){var c,u,f,p=i.extend(!0,{},i.ajaxSettings,o),h=p.type.toUpperCase(),m=de.test(h);if(p.url=p.url.replace(be,""),p.context=o&&null!=o.context?o.context:p,p.data&&p.processData&&"string"!=typeof p.data&&(p.data=i.param(p.data,p.traditional)),"jsonp"===p.dataType&&("GET"===h?he.test(p.url)||(p.url+=(me.test(p.url)?"&":"?")+(p.jsonp||"callback")+"=?"):p.data&&he.test(p.data)||(p.data=(p.data?p.data+"&":"")+(p.jsonp||"callback")+"=?"),p.dataType="json"),"json"===p.dataType&&(p.data&&he.test(p.data)||he.test(p.url))){c=p.jsonpCallback||"jsonp"+le++,p.data&&(p.data=(p.data+"").replace(he,"="+c+"$1")),p.url=p.url.replace(he,"="+c+"$1"),p.dataType="script";var g=t[c];t[c]=function(r){if(f=r,i.handleSuccess(p,C,u,f),i.handleComplete(p,C,u,f),i.isFunction(g))g(r);else{t[c]=n;try{delete t[c]}catch(t){}}T&&T.removeChild(N)}}if("script"===p.dataType&&null===p.cache&&(p.cache=!1),!1===p.cache&&"GET"===h){var y=i.now(),x=p.url.replace(ge,"$1_="+y);p.url=x+(x===p.url?(me.test(p.url)?"&":"?")+"_="+y:"")}if(p.data&&"GET"===h&&(p.url+=(me.test(p.url)?"&":"?")+p.data),p.global&&0==i.active++&&i.event.trigger("ajaxStart"),y=(y=ye.exec(p.url))&&(y[1]&&y[1]!==location.protocol||y[2]!==location.host),"script"===p.dataType&&"GET"===h&&y){var T=r.getElementsByTagName("head")[0]||r.documentElement,N=r.createElement("script");if(p.scriptCharset&&(N.charset=p.scriptCharset),N.src=p.url,!c){var w=!1;N.onload=N.onreadystatechange=function(){w||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(w=!0,i.handleSuccess(p,C,u,f),i.handleComplete(p,C,u,f),N.onload=N.onreadystatechange=null,T&&N.parentNode&&T.removeChild(N))}}return T.insertBefore(N,T.firstChild),n}var E=!1,C=p.xhr();if(C){p.username?C.open(h,p.url,p.async,p.username,p.password):C.open(h,p.url,p.async);try{(null!=p.data&&!m||o&&o.contentType)&&C.setRequestHeader("Content-Type",p.contentType),p.ifModified&&(i.lastModified[p.url]&&C.setRequestHeader("If-Modified-Since",i.lastModified[p.url]),i.etag[p.url]&&C.setRequestHeader("If-None-Match",i.etag[p.url])),y||C.setRequestHeader("X-Requested-With","XMLHttpRequest"),C.setRequestHeader("Accept",p.dataType&&p.accepts[p.dataType]?p.accepts[p.dataType]+", */*; q=0.01":p.accepts._default)}catch(t){}if(p.beforeSend&&!1===p.beforeSend.call(p.context,C,p))return p.global&&1==i.active--&&i.event.trigger("ajaxStop"),C.abort(),!1;p.global&&i.triggerGlobal(p,"ajaxSend",[C,p]);var A=C.onreadystatechange=function(t){if(C&&0!==C.readyState&&"abort"!==t){if(!E&&C&&(4===C.readyState||"timeout"===t)){var n;if(E=!0,C.onreadystatechange=i.noop,"success"===(u="timeout"===t?"timeout":i.httpSuccess(C)?p.ifModified&&i.httpNotModified(C,p.url)?"notmodified":"success":"error"))try{f=i.httpData(C,p.dataType,p)}catch(t){u="parsererror",n=t}"success"===u||"notmodified"===u?c||i.handleSuccess(p,C,u,f):i.handleError(p,C,u,n),c||i.handleComplete(p,C,u,f),"timeout"===t&&C.abort(),p.async&&(C=null)}}else E||i.handleComplete(p,C,u,f),E=!0,C&&(C.onreadystatechange=i.noop)};try{var j=C.abort;C.abort=function(){C&&j.call&&j.call(C),A("abort")}}catch(t){}p.async&&p.timeout>0&&setTimeout((function(){C&&!E&&A("timeout")}),p.timeout);try{C.send(m||null==p.data?null:p.data)}catch(t){i.handleError(p,C,null,t),i.handleComplete(p,C,u,f)}return p.async||A(),C}},param:function(t,r){var o=[],e=function(t,n){n=i.isFunction(n)?n():n,o[o.length]=encodeURIComponent(t)+"="+encodeURIComponent(n)};if(r===n&&(r=i.ajaxSettings.traditional),i.isArray(t)||t.jquery)i.each(t,(function(){e(this.name,this.value)}));else for(var c in t)ca(c,t[c],r,e);return o.join("&").replace(ve,"+")}}),i.extend({active:0,lastModified:{},etag:{},handleError:function(t,n,r,o){t.error&&t.error.call(t.context,n,r,o),t.global&&i.triggerGlobal(t,"ajaxError",[n,t,o])},handleSuccess:function(t,n,r,o){t.success&&t.success.call(t.context,o,r,n),t.global&&i.triggerGlobal(t,"ajaxSuccess",[n,t])},handleComplete:function(t,n,r){t.complete&&t.complete.call(t.context,n,r),t.global&&i.triggerGlobal(t,"ajaxComplete",[n,t]),t.global&&1==i.active--&&i.event.trigger("ajaxStop")},triggerGlobal:function(t,n,r){(t.context&&null==t.context.url?i(t.context):i.event).trigger(n,r)},httpSuccess:function(t){try{return!t.status&&"file:"===location.protocol||t.status>=200&&t.status<300||304===t.status||1223===t.status}catch(t){}return!1},httpNotModified:function(t,n){var r=t.getResponseHeader("Last-Modified"),o=t.getResponseHeader("Etag");return r&&(i.lastModified[n]=r),o&&(i.etag[n]=o),304===t.status},httpData:function(t,n,r){var o=t.getResponseHeader("content-type")||"",c="xml"===n||!n&&o.indexOf("xml")>=0;return t=c?t.responseXML:t.responseText,c&&"parsererror"===t.documentElement.nodeName&&i.error("parsererror"),r&&r.dataFilter&&(t=r.dataFilter(t,n)),"string"==typeof t&&("json"===n||!n&&o.indexOf("json")>=0?t=i.parseJSON(t):("script"===n||!n&&o.indexOf("javascript")>=0)&&i.globalEval(t)),t}}),t.ActiveXObject&&(i.ajaxSettings.xhr=function(){if("file:"!==t.location.protocol)try{return new t.XMLHttpRequest}catch(t){}try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}),i.support.ajax=!!i.ajaxSettings.xhr();var Te,Ne={},we=/^(?:toggle|show|hide)$/,Ee=/^([+\-]=)?([\d+.\-]+)(.*)$/,Se=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];i.fn.extend({show:function(t,n,r){if(t||0===t)return this.animate(S("show",3),t,n,r);for(t=0,n=this.length;t<n;t++)i.data(this[t],"olddisplay")||"none"!==this[t].style.display||(this[t].style.display=""),""===this[t].style.display&&"none"===i.css(this[t],"display")&&i.data(this[t],"olddisplay",oa(this[t].nodeName));for(t=0;t<n;t++)this[t].style.display=i.data(this[t],"olddisplay")||"";return this},hide:function(t,n,r){if(t||0===t)return this.animate(S("hide",3),t,n,r);for(t=0,n=this.length;t<n;t++)"none"!==(r=i.css(this[t],"display"))&&i.data(this[t],"olddisplay",r);for(t=0;t<n;t++)this[t].style.display="none";return this},_toggle:i.fn.toggle,toggle:function(t,n,r){var o="boolean"==typeof t;return i.isFunction(t)&&i.isFunction(n)?this._toggle.apply(this,arguments):null==t||o?this.each((function(){var n=o?t:i(this).is(":hidden");i(this)[n?"show":"hide"]()})):this.animate(S("toggle",3),t,n,r),this},fadeTo:function(t,n,r,i){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:n},t,r,i)},animate:function(t,n,r,o){var c=i.speed(n,r,o);return i.isEmptyObject(t)?this.each(c.complete):this[!1===c.queue?"each":"queue"]((function(){var n,r=i.extend({},c),o=1===this.nodeType,u=o&&i(this).is(":hidden"),f=this;for(n in t){var p=i.camelCase(n);if(n!==p&&(t[p]=t[n],delete t[n],n=p),"hide"===t[n]&&u||"show"===t[n]&&!u)return r.complete.call(this);!o||"height"!==n&&"width"!==n||(r.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===i.css(this,"display")&&"none"===i.css(this,"float")&&(i.support.inlineBlockNeedsLayout?"inline"===oa(this.nodeName)?this.style.display="inline-block":(this.style.display="inline",this.style.zoom=1):this.style.display="inline-block")),i.isArray(t[n])&&((r.specialEasing=r.specialEasing||{})[n]=t[n][1],t[n]=t[n][0])}return null!=r.overflow&&(this.style.overflow="hidden"),r.curAnim=i.extend({},t),i.each(t,(function(n,o){var c=new i.fx(f,r,n);if(we.test(o))c["toggle"===o?u?"show":"hide":o](t);else{var p=Ee.exec(o),h=c.cur(!0)||0;if(p){var m=parseFloat(p[2]),g=p[3]||"px";"px"!==g&&(i.style(f,n,(m||1)+g),h=(m||1)/c.cur(!0)*h,i.style(f,n,h+g)),p[1]&&(m=("-="===p[1]?-1:1)*m+h),c.custom(h,m,g)}else c.custom(h,o,"")}})),!0}))},stop:function(t,n){var r=i.timers;return t&&this.queue([]),this.each((function(){for(var t=r.length-1;t>=0;t--)r[t].elem===this&&(n&&r[t](!0),r.splice(t,1))})),n||this.dequeue(),this}}),i.each({slideDown:S("show",1),slideUp:S("hide",1),slideToggle:S("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},(function(t,n){i.fn[t]=function(t,r,i){return this.animate(n,t,r,i)}})),i.extend({speed:function(t,n,r){var o=t&&"object"==typeof t?i.extend({},t):{complete:r||!r&&n||i.isFunction(t)&&t,duration:t,easing:r&&n||n&&!i.isFunction(n)&&n};return o.duration=i.fx.off?0:"number"==typeof o.duration?o.duration:o.duration in i.fx.speeds?i.fx.speeds[o.duration]:i.fx.speeds._default,o.old=o.complete,o.complete=function(){!1!==o.queue&&i(this).dequeue(),i.isFunction(o.old)&&o.old.call(this)},o},easing:{linear:function(t,n,r,i){return r+i*t},swing:function(t,n,r,i){return(-Math.cos(t*Math.PI)/2+.5)*i+r}},timers:[],fx:function(t,n,r){this.options=n,this.elem=t,this.prop=r,n.orig||(n.orig={})}}),i.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(i.fx.step[this.prop]||i.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var t=parseFloat(i.css(this.elem,this.prop));return t&&t>-1e4?t:0},custom:function(t,n,r){function e(t){return o.step(t)}this.startTime=i.now(),this.start=t,this.end=n,this.unit=r||this.unit||"px",this.now=this.start,this.pos=this.state=0;var o=this;t=i.fx,e.elem=this.elem,e()&&i.timers.push(e)&&!Te&&(Te=setInterval(t.tick,t.interval))},show:function(){this.options.orig[this.prop]=i.style(this.elem,this.prop),this.options.show=!0,this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),i(this.elem).show()},hide:function(){this.options.orig[this.prop]=i.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(t){var n=i.now(),r=!0;if(t||n>=this.options.duration+this.startTime){for(var o in this.now=this.end,this.pos=this.state=1,this.update(),this.options.curAnim[this.prop]=!0,this.options.curAnim)!0!==this.options.curAnim[o]&&(r=!1);if(r){if(null!=this.options.overflow&&!i.support.shrinkWrapBlocks){var c=this.elem,u=this.options;i.each(["","X","Y"],(function(t,n){c.style["overflow"+n]=u.overflow[t]}))}if(this.options.hide&&i(this.elem).hide(),this.options.hide||this.options.show)for(var f in this.options.curAnim)i.style(this.elem,f,this.options.orig[f]);this.options.complete.call(this.elem)}return!1}return t=n-this.startTime,this.state=t/this.options.duration,n=this.options.easing||(i.easing.swing?"swing":"linear"),this.pos=i.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||n](this.state,t,0,1,this.options.duration),this.now=this.start+(this.end-this.start)*this.pos,this.update(),!0}},i.extend(i.fx,{tick:function(){for(var t=i.timers,n=0;n<t.length;n++)t[n]()||t.splice(n--,1);t.length||i.fx.stop()},interval:13,stop:function(){clearInterval(Te),Te=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(t){i.style(t.elem,"opacity",t.now)},_default:function(t){t.elem.style&&null!=t.elem.style[t.prop]?t.elem.style[t.prop]=("width"===t.prop||"height"===t.prop?Math.max(0,t.now):t.now)+t.unit:t.elem[t.prop]=t.now}}}),i.expr&&i.expr.filters&&(i.expr.filters.animated=function(t){return i.grep(i.timers,(function(n){return t===n.elem})).length});var Ce=/^t(?:able|d|h)$/i,Ae=/^(?:body|html)$/i;i.fn.offset="getBoundingClientRect"in r.documentElement?function(t){var n,r=this[0];if(t)return this.each((function(n){i.offset.setOffset(this,t,n)}));if(!r||!r.ownerDocument)return null;if(r===r.ownerDocument.body)return i.offset.bodyOffset(r);try{n=r.getBoundingClientRect()}catch(t){}var o=r.ownerDocument,c=o.documentElement;return n&&i.contains(c,r)?(r=o.body,o=ea(o),{top:n.top+(o.pageYOffset||i.support.boxModel&&c.scrollTop||r.scrollTop)-(c.clientTop||r.clientTop||0),left:n.left+(o.pageXOffset||i.support.boxModel&&c.scrollLeft||r.scrollLeft)-(c.clientLeft||r.clientLeft||0)}):n||{top:0,left:0}}:function(t){var n=this[0];if(t)return this.each((function(n){i.offset.setOffset(this,t,n)}));if(!n||!n.ownerDocument)return null;if(n===n.ownerDocument.body)return i.offset.bodyOffset(n);i.offset.initialize();var r,o=n.offsetParent,c=n.ownerDocument,u=c.documentElement,f=c.body;r=(c=c.defaultView)?c.getComputedStyle(n,null):n.currentStyle;for(var p=n.offsetTop,h=n.offsetLeft;(n=n.parentNode)&&n!==f&&n!==u&&(!i.offset.supportsFixedPosition||"fixed"!==r.position);)r=c?c.getComputedStyle(n,null):n.currentStyle,p-=n.scrollTop,h-=n.scrollLeft,n===o&&(p+=n.offsetTop,h+=n.offsetLeft,!i.offset.doesNotAddBorder||i.offset.doesAddBorderForTableAndCells&&Ce.test(n.nodeName)||(p+=parseFloat(r.borderTopWidth)||0,h+=parseFloat(r.borderLeftWidth)||0),o=n.offsetParent),i.offset.subtractsBorderForOverflowNotVisible&&"visible"!==r.overflow&&(p+=parseFloat(r.borderTopWidth)||0,h+=parseFloat(r.borderLeftWidth)||0),r=r;return"relative"!==r.position&&"static"!==r.position||(p+=f.offsetTop,h+=f.offsetLeft),i.offset.supportsFixedPosition&&"fixed"===r.position&&(p+=Math.max(u.scrollTop,f.scrollTop),h+=Math.max(u.scrollLeft,f.scrollLeft)),{top:p,left:h}},i.offset={initialize:function(){var t,n,o,c=r.body,u=r.createElement("div"),f=parseFloat(i.css(c,"marginTop"))||0;i.extend(u.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"}),u.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",c.insertBefore(u,c.firstChild),n=(t=u.firstChild).firstChild,o=t.nextSibling.firstChild.firstChild,this.doesNotAddBorder=5!==n.offsetTop,this.doesAddBorderForTableAndCells=5===o.offsetTop,n.style.position="fixed",n.style.top="20px",this.supportsFixedPosition=20===n.offsetTop||15===n.offsetTop,n.style.position=n.style.top="",t.style.overflow="hidden",t.style.position="relative",this.subtractsBorderForOverflowNotVisible=-5===n.offsetTop,this.doesNotIncludeMarginInBodyOffset=c.offsetTop!==f,c.removeChild(u),i.offset.initialize=i.noop},bodyOffset:function(t){var n=t.offsetTop,r=t.offsetLeft;return i.offset.initialize(),i.offset.doesNotIncludeMarginInBodyOffset&&(n+=parseFloat(i.css(t,"marginTop"))||0,r+=parseFloat(i.css(t,"marginLeft"))||0),{top:n,left:r}},setOffset:function(t,n,r){var o=i.css(t,"position");"static"===o&&(t.style.position="relative");var c=i(t),u=c.offset(),f=i.css(t,"top"),p=i.css(t,"left"),h="absolute"===o&&i.inArray("auto",[f,p])>-1;o={};var m={};h&&(m=c.position()),f=h?m.top:parseInt(f,10)||0,p=h?m.left:parseInt(p,10)||0,i.isFunction(n)&&(n=n.call(t,r,u)),null!=n.top&&(o.top=n.top-u.top+f),null!=n.left&&(o.left=n.left-u.left+p),"using"in n?n.using.call(t,o):c.css(o)}},i.fn.extend({position:function(){if(!this[0])return null;var t=this[0],n=this.offsetParent(),r=this.offset(),o=Ae.test(n[0].nodeName)?{top:0,left:0}:n.offset();return r.top-=parseFloat(i.css(t,"marginTop"))||0,r.left-=parseFloat(i.css(t,"marginLeft"))||0,o.top+=parseFloat(i.css(n[0],"borderTopWidth"))||0,o.left+=parseFloat(i.css(n[0],"borderLeftWidth"))||0,{top:r.top-o.top,left:r.left-o.left}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent||r.body;t&&!Ae.test(t.nodeName)&&"static"===i.css(t,"position");)t=t.offsetParent;return t}))}}),i.each(["Left","Top"],(function(t,r){var o="scroll"+r;i.fn[o]=function(r){var c,u=this[0];return u?r!==n?this.each((function(){(c=ea(this))?c.scrollTo(t?i(c).scrollLeft():r,t?r:i(c).scrollTop()):this[o]=r})):(c=ea(u))?"pageXOffset"in c?c[t?"pageYOffset":"pageXOffset"]:i.support.boxModel&&c.document.documentElement[o]||c.document.body[o]:u[o]:null}})),i.each(["Height","Width"],(function(t,r){var o=r.toLowerCase();i.fn["inner"+r]=function(){return this[0]?parseFloat(i.css(this[0],o,"padding")):null},i.fn["outer"+r]=function(t){return this[0]?parseFloat(i.css(this[0],o,t?"margin":"border")):null},i.fn[o]=function(t){var c=this[0];return c?i.isFunction(t)?this.each((function(n){var r=i(this);r[o](t.call(this,n,r[o]()))})):i.isWindow(c)?"CSS1Compat"===c.document.compatMode&&c.document.documentElement["client"+r]||c.document.body["client"+r]:9===c.nodeType?Math.max(c.documentElement["client"+r],c.body["scroll"+r],c.documentElement["scroll"+r],c.body["offset"+r],c.documentElement["offset"+r]):t===n?parseFloat(i.css(c,o)):this.css(o,"string"==typeof t?t:t+"px"):null==t?null:this}}))}(window);var TouchInput=pc.createScript("touchInput");TouchInput.attributes.add("orbitSensitivity",{type:"number",default:.4,title:"Orbit Sensitivity",description:"How fast the camera moves around the orbit. Higher is faster"}),TouchInput.attributes.add("distanceSensitivity",{type:"number",default:.2,title:"Distance Sensitivity",description:"How fast the camera moves in and out. Higher is faster"}),TouchInput.prototype.initialize=function(){this.orbitCamera=this.entity.script.orbitCamera,this.lastTouchPoint=new pc.Vec2,this.lastPinchMidPoint=new pc.Vec2,this.lastPinchDistance=0,this.orbitCamera&&this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHCANCEL,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.on("destroy",(function(){this.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHCANCEL,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHMOVE,this.onTouchMove,this)})))},TouchInput.prototype.SetInput=function(t){this.orbitCamera&&this.app.touch&&(t?(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHCANCEL,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this)):(this.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHCANCEL,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHMOVE,this.onTouchMove,this)))},TouchInput.prototype.getPinchDistance=function(t,i){var o=t.x-i.x,h=t.y-i.y;return Math.sqrt(o*o+h*h)},TouchInput.prototype.calcMidPoint=function(t,i,o){o.set(i.x-t.x,i.y-t.y),o.scale(.5),o.x+=t.x,o.y+=t.y},TouchInput.prototype.onTouchStartEndCancel=function(t){var i=t.touches;1==i.length?this.lastTouchPoint.set(i[0].x,i[0].y):2==i.length&&(this.lastPinchDistance=this.getPinchDistance(i[0],i[1]),this.calcMidPoint(i[0],i[1],this.lastPinchMidPoint))},TouchInput.fromWorldPoint=new pc.Vec3,TouchInput.toWorldPoint=new pc.Vec3,TouchInput.worldDiff=new pc.Vec3,TouchInput.prototype.pan=function(t){var i=TouchInput.fromWorldPoint,o=TouchInput.toWorldPoint,h=TouchInput.worldDiff,n=this.entity.camera,c=this.orbitCamera.distance;n.screenToWorld(t.x,t.y,c,i),n.screenToWorld(this.lastPinchMidPoint.x,this.lastPinchMidPoint.y,c,o),h.sub2(o,i),this.orbitCamera.pivotPoint.add(h)},TouchInput.pinchMidPoint=new pc.Vec2,TouchInput.prototype.onTouchMove=function(t){var i=TouchInput.pinchMidPoint,o=t.touches;if(1==o.length){var h=o[0];this.orbitCamera.pitch-=(h.y-this.lastTouchPoint.y)*this.orbitSensitivity,this.orbitCamera.yaw-=(h.x-this.lastTouchPoint.x)*this.orbitSensitivity,this.lastTouchPoint.set(h.x,h.y)}else if(2==o.length){var n=this.getPinchDistance(o[0],o[1]),c=n-this.lastPinchDistance;this.lastPinchDistance=n,this.orbitCamera.distance-=c*this.distanceSensitivity*.1*(.1*this.orbitCamera.distance),this.calcMidPoint(o[0],o[1],i),this.pan(i),this.lastPinchMidPoint.copy(i)}};var OrbitCamera=pc.createScript("orbitCamera");OrbitCamera.attributes.add("distanceMax",{type:"number",default:0,title:"Distance Max",description:"Setting this at 0 will give an infinite distance limit"}),OrbitCamera.attributes.add("distanceMin",{type:"number",default:0,title:"Distance Min"}),OrbitCamera.attributes.add("pitchAngleMax",{type:"number",default:90,title:"Pitch Angle Max (degrees)"}),OrbitCamera.attributes.add("pitchAngleMin",{type:"number",default:-90,title:"Pitch Angle Min (degrees)"}),OrbitCamera.attributes.add("inertiaFactor",{type:"number",default:0,title:"Inertia Factor",description:"Higher value means that the camera will continue moving after the user has stopped dragging. 0 is fully responsive."}),OrbitCamera.attributes.add("focusEntity",{type:"entity",title:"Focus Entity",description:"Entity for the camera to focus on. If blank, then the camera will use the whole scene"}),OrbitCamera.attributes.add("frameOnStart",{type:"boolean",default:!0,title:"Frame on Start",description:'Frames the entity or scene at the start of the application."'}),Object.defineProperty(OrbitCamera.prototype,"distance",{get:function(){return this._targetDistance},set:function(t){this._targetDistance=this._clampDistance(t)}}),Object.defineProperty(OrbitCamera.prototype,"pitch",{get:function(){return this._targetPitch},set:function(t){this._targetPitch=this._clampPitchAngle(t)}}),Object.defineProperty(OrbitCamera.prototype,"yaw",{get:function(){return this._targetYaw},set:function(t){this._targetYaw=t;var i=(this._targetYaw-this._yaw)%360;this._targetYaw=i>180?this._yaw-(360-i):i<-180?this._yaw+(360+i):this._yaw+i}}),Object.defineProperty(OrbitCamera.prototype,"pivotPoint",{get:function(){return this._pivotPoint},set:function(t){this._pivotPoint.copy(t)}}),OrbitCamera.prototype.focus=function(t){this._buildAabb(t,0);var i=this._modelsAabb.halfExtents,e=Math.max(i.x,Math.max(i.y,i.z));e/=Math.tan(.5*this.entity.camera.fov*pc.math.DEG_TO_RAD),e*=2,this.distance=e,this._removeInertia(),this._pivotPoint.copy(this._modelsAabb.center)},OrbitCamera.distanceBetween=new pc.Vec3,OrbitCamera.prototype.resetAndLookAtPoint=function(t,i){this.pivotPoint.copy(i),this.entity.setPosition(t),this.entity.lookAt(i);var e=OrbitCamera.distanceBetween;e.sub2(i,t),this.distance=e.length(),this.pivotPoint.copy(i);var a=this.entity.getRotation();this.yaw=this._calcYaw(a),this.pitch=this._calcPitch(a,this.yaw),this._removeInertia(),this._updatePosition()},OrbitCamera.prototype.resetAndLookAtEntity=function(t,i){this._buildAabb(i,0),this.resetAndLookAtPoint(t,this._modelsAabb.center)},OrbitCamera.prototype.reset=function(t,i,e){this.pitch=i,this.yaw=t,this.distance=e,this._removeInertia()},OrbitCamera.prototype.initialize=function(){var t=this,onWindowResize=function(){t._checkAspectRatio()};window.addEventListener("resize",onWindowResize,!1),this._checkAspectRatio(),this._modelsAabb=new pc.BoundingBox,this._buildAabb(this.focusEntity||this.app.root,0),this.entity.lookAt(this._modelsAabb.center),this._pivotPoint=new pc.Vec3,this._pivotPoint.copy(this._modelsAabb.center);var i=this.entity.getRotation();this._yaw=this._calcYaw(i),this._pitch=this._clampPitchAngle(this._calcPitch(i,this._yaw)),this.entity.setLocalEulerAngles(this._pitch,this._yaw,0),this._distance=0,this._targetYaw=this._yaw,this._targetPitch=this._pitch;var e=new pc.Vec3;e.sub2(this.entity.getPosition(),this._pivotPoint),this._distance=this._clampDistance(e.length()),this.frameOnStart&&this.focus(this.focusEntity||this.app.root),this._targetDistance=(this.distanceMax-this.distanceMin)/2+this.distanceMin,this.on("attr:distanceMin",(function(t,i){this._targetDistance=this._clampDistance(this._distance)})),this.on("attr:distanceMax",(function(t,i){this._targetDistance=this._clampDistance(this._distance)})),this.on("attr:pitchAngleMin",(function(t,i){this._targetPitch=this._clampPitchAngle(this._pitch)})),this.on("attr:pitchAngleMax",(function(t,i){this._targetPitch=this._clampPitchAngle(this._pitch)})),this.on("attr:focusEntity",(function(t,i){this.frameOnStart?this.focus(t||this.app.root):this.resetAndLookAtEntity(this.entity.getPosition(),t||this.app.root)})),this.on("attr:frameOnStart",(function(t,i){t&&this.focus(this.focusEntity||this.app.root)})),this.on("destroy",(function(){window.removeEventListener("resize",onWindowResize,!1)}))},OrbitCamera.prototype.SetTargetPos=function(){this._targetYaw=this._yaw,this._pitch=this._targetPitch},OrbitCamera.prototype.update=function(t){var i=0===this.inertiaFactor?1:Math.min(t/this.inertiaFactor,1);this._distance=pc.math.lerp(this._distance,this._targetDistance,i),this._yaw=pc.math.lerp(this._yaw,this._targetYaw,i),this._pitch=pc.math.lerp(this._pitch,this._targetPitch,i),this._updatePosition()},OrbitCamera.prototype._updatePosition=function(){this.entity.setLocalPosition(0,0,0),this.entity.setLocalEulerAngles(this._pitch,this._yaw,0);var t=this.entity.getPosition();t.copy(this.entity.forward),t.scale(-this._distance),t.add(this.pivotPoint),this.entity.setPosition(t)},OrbitCamera.prototype._removeInertia=function(){this._yaw=this._targetYaw,this._pitch=this._targetPitch,this._distance=this._targetDistance},OrbitCamera.prototype._checkAspectRatio=function(){var t=this.app.graphicsDevice.height,i=this.app.graphicsDevice.width;this.entity.camera.horizontalFov=t>i},OrbitCamera.prototype._buildAabb=function(t,i){var e=0;if(t.model){var a=t.model.meshInstances;if(a)for(e=0;e<a.length;e++)0===i?this._modelsAabb.copy(a[e].aabb):this._modelsAabb.add(a[e].aabb),i+=1}for(e=0;e<t.children.length;++e)i+=this._buildAabb(t.children[e],i);return i},OrbitCamera.prototype._calcYaw=function(t){var i=new pc.Vec3;return t.transformVector(pc.Vec3.FORWARD,i),Math.atan2(-i.x,-i.z)*pc.math.RAD_TO_DEG},OrbitCamera.prototype._clampDistance=function(t){return this.distanceMax>0?pc.math.clamp(t,this.distanceMin,this.distanceMax):Math.max(t,this.distanceMin)},OrbitCamera.prototype._clampPitchAngle=function(t){return pc.math.clamp(t,-this.pitchAngleMax,-this.pitchAngleMin)},OrbitCamera.quatWithoutYaw=new pc.Quat,OrbitCamera.yawOffset=new pc.Quat,OrbitCamera.prototype._calcPitch=function(t,i){var e=OrbitCamera.quatWithoutYaw,a=OrbitCamera.yawOffset;a.setFromEulerAngles(0,-i,0),e.mul2(a,t);var s=new pc.Vec3;return e.transformVector(pc.Vec3.FORWARD,s),Math.atan2(s.y,-s.z)*pc.math.RAD_TO_DEG};var MouseInput=pc.createScript("mouseInput");MouseInput.attributes.add("orbitSensitivity",{type:"number",default:.3,title:"Orbit Sensitivity",description:"How fast the camera moves around the orbit. Higher is faster"}),MouseInput.attributes.add("distanceSensitivity",{type:"number",default:.15,title:"Distance Sensitivity",description:"How fast the camera moves in and out. Higher is faster"}),MouseInput.prototype.initialize=function(){if(this.orbitCamera=this.entity.script.orbitCamera,this.orbitCamera){var t=this,onMouseOut=function(o){t.onMouseOut(o)};this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this),window.addEventListener("mouseout",onMouseOut,!1),this.on("destroy",(function(){this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.off(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.off(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.off(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this),window.removeEventListener("mouseout",onMouseOut,!1)}))}this.app.mouse.disableContextMenu(),this.lookButtonDown=!1,this.panButtonDown=!1,this.lastPoint=new pc.Vec2},MouseInput.prototype.SetInput=function(t){t?(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this)):(this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.off(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.off(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.off(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this))},MouseInput.fromWorldPoint=new pc.Vec3,MouseInput.toWorldPoint=new pc.Vec3,MouseInput.worldDiff=new pc.Vec3,MouseInput.prototype.pan=function(t){var o=MouseInput.fromWorldPoint,s=MouseInput.toWorldPoint,e=MouseInput.worldDiff,i=this.entity.camera,n=this.orbitCamera.distance;i.screenToWorld(t.x,t.y,n,o),i.screenToWorld(this.lastPoint.x,this.lastPoint.y,n,s),e.sub2(s,o),this.orbitCamera.pivotPoint.add(e)},MouseInput.prototype.onMouseDown=function(t){switch(t.button){case pc.MOUSEBUTTON_LEFT:this.lookButtonDown=!0;break;case pc.MOUSEBUTTON_MIDDLE:case pc.MOUSEBUTTON_RIGHT:this.panButtonDown=!0}},MouseInput.prototype.onMouseUp=function(t){switch(t.button){case pc.MOUSEBUTTON_LEFT:this.lookButtonDown=!1;break;case pc.MOUSEBUTTON_MIDDLE:case pc.MOUSEBUTTON_RIGHT:this.panButtonDown=!1}},MouseInput.prototype.onMouseMove=function(t){pc.app.mouse;this.lookButtonDown&&this.orbitCamera.enabled?(this.orbitCamera.pitch-=t.dy*this.orbitSensitivity,this.orbitCamera.yaw-=t.dx*this.orbitSensitivity,console.warn("d")):this.panButtonDown&&this.pan(t),this.lastPoint.set(t.x,t.y)},MouseInput.prototype.onMouseWheel=function(t){this.orbitCamera.distance-=t.wheel*this.distanceSensitivity*(.1*this.orbitCamera.distance),t.event.preventDefault()},MouseInput.prototype.onMouseOut=function(t){this.lookButtonDown=!1,this.panButtonDown=!1};var KeyboardInput=pc.createScript("keyboardInput");KeyboardInput.prototype.initialize=function(){this.orbitCamera=this.entity.script.orbitCamera},KeyboardInput.prototype.postInitialize=function(){this.orbitCamera&&(this.startDistance=this.orbitCamera.distance,this.startYaw=this.orbitCamera.yaw,this.startPitch=this.orbitCamera.pitch,this.startPivotPosition=this.orbitCamera.pivotPoint.clone())},KeyboardInput.prototype.update=function(e){if(this.app.keyboard.wasPressed(pc.KEY_SPACE)){var t=window.document,i=t.documentElement,r=i.requestFullscreen||i.mozRequestFullScreen||i.webkitRequestFullScreen||i.msRequestFullscreen,n=t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen;t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?n.call(t):r.call(i)}};var WebVrUi=pc.createScript("webVrUi");WebVrUi.attributes.add("enterVrWhite",{type:"asset",title:"Enter VR White Asset"}),WebVrUi.attributes.add("enterVrOrange",{type:"asset",title:"Enter VR Orange Asset"}),WebVrUi.attributes.add("infoBoxLifeSpan",{type:"number",default:3,title:"Info Box Life Span"}),WebVrUi.prototype.initialize=function(){this.app.vr&&this.app.vr.display&&(this.app.vr.display.display.bufferScale_=1,this.app.vr.display.on("presentchange",this.onVrPresentChange,this)),this.camera=this.app.root.findByName("Camera"),this.camera2=this.app.root.findByName("Camera2"),this.app.assets.load(this.enterVrWhite),this.app.assets.load(this.enterVrOrange);var i='#vr-button {position: absolute;right: 0px;bottom: 0px;background-image: url("'+this.enterVrWhite.getFileUrl()+'");width: 146px;height: 104px;display: block;background-position: 0px 0px;background-size: 146px 104px; cursor: pointer;}#vr-button:hover {background-image: url("'+this.enterVrOrange.getFileUrl()+'");}#info-box {position: absolute;\tright: 140px;bottom: 26px;display: block;background-color: rgba(0,0,0, 168);color: rgb(218, 218, 218);padding: 5px 10px 5px 10px;max-width: 220px;}#info-box a, #info-box a:hover, #info-box a:visited, #info-box a:active {text-decoration: underline;color: rgb(218, 218, 218);}';this.style=pc.createStyle(i),document.head.appendChild(this.style),this.vrButtonDiv=document.createElement("div"),this.vrButtonDiv.id="vr-button",this.vrButtonDiv.innerHTML="&nbsp",document.body.appendChild(this.vrButtonDiv),this.on("destroy",(function(){document.body.removeChild(this.vrButtonDiv),document.head.appendChild(this.style)})),this.infoBoxDiv=document.createElement("div"),this.infoBoxDiv.id="info-box",this.infoBoxLifeTime=0,this.infoBoxShowing=!1,this.vrEntered=!1;var t=this,onEnterVrPressedEvent=function(){if(t.app.vr&&t.app.vr.display){var i=t.camera.camera.priority>t.camera2.camera.priority?t.camera:t.camera2;t.vrEntered?i.camera.exitVr((function(i){i&&console.warn(i)})):i.camera.enterVr((function(i){i&&console.warn(i)}))}else t.infoBoxShowing||(t.app.vr.isSupported?t.infoBoxDiv.innerHTML="No VR display or headset is detected.":t.infoBoxDiv.innerHTML="Sorry, your browser does not support WebVR :(. Please go <a href='https://webvr.info/' target='_blank'>here</a> for more information.",t.infoBoxLifeTime=t.infoBoxLifeSpan,t.infoBoxShowing=!0)};this.vrButtonDiv.addEventListener("click",onEnterVrPressedEvent,!1),onEnterVrPressedEvent()},WebVrUi.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},WebVrUi.prototype.update=function(i){this.infoBoxDiv&&this.infoBoxShowing&&(this.infoBoxLifeTime-=i,this.infoBoxLifeTime<=0&&(this.infoBoxShowing=!1))},WebVrUi.prototype.onVrPresentChange=function(i){i.presenting?(this.isMobile()&&document.body.removeChild(this.vrButtonDiv),this.vrEntered=!0):(this.isMobile()&&document.body.appendChild(this.vrButtonDiv),this.vrEntered=!1)};pc.extend(pc,function(){var EdgeDetectEffect=function(t){this.shader=new pc.Shader(t,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+t.precision+" float;","","uniform sampler2D uColorBuffer;","varying vec2 vUv0;","uniform vec2 uResolution;","uniform float uIntensity;","uniform vec4 uColor;","","mat3 G[2];","","const mat3 g0 = mat3( 1.0, 2.0, 1.0, 0.0, 0.0, 0.0, -1.0, -2.0, -1.0 );","const mat3 g1 = mat3( 1.0, 0.0, -1.0, 2.0, 0.0, -2.0, 1.0, 0.0, -1.0 );","","void main(void)","{","    mat3 I;","    float cnv[2];","    vec3 sample;","","    G[0] = g0;","    G[1] = g1;","","    for (float i = 0.0; i < 3.0; i++)","    {","        for (float j = 0.0; j < 3.0; j++)","        {","            sample = texture2D(uColorBuffer, vUv0 + uResolution * vec2(i - 1.0, j - 1.0)).rgb;","            I[int(i)][int(j)] = length(sample);","         }","    }","","    for (int i=0; i<2; i++)","    {","        float dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);","        cnv[i] = dp3 * dp3; ","    }","","    gl_FragColor = uIntensity * uColor * vec4(sqrt(cnv[0]*cnv[0]+cnv[1]*cnv[1]));","}"].join("\n")}),this.resolution=new Float32Array(2),this.intensity=1,this.color=new pc.Color(1,1,1,1)};return(EdgeDetectEffect=pc.inherits(EdgeDetectEffect,pc.PostEffect)).prototype=pc.extend(EdgeDetectEffect.prototype,{render:function(t,e,i){var o=this.device,n=o.scope;this.resolution[0]=1/t.width,this.resolution[1]=1/t.height,n.resolve("uResolution").setValue(this.resolution),n.resolve("uColorBuffer").setValue(t.colorBuffer),n.resolve("uColor").setValue(this.color.data),n.resolve("uIntensity").setValue(this.intensity),pc.drawFullscreenQuad(o,e,this.vertexBuffer,this.shader,i)}}),{EdgeDetectEffect:EdgeDetectEffect}}());var EdgeDetect=pc.createScript("edgeDetect");EdgeDetect.attributes.add("intensity",{type:"number",default:1,min:0,max:2,title:"Intensity"}),EdgeDetect.attributes.add("color",{type:"rgba",default:[.5,.5,.5,1],title:"Color"}),EdgeDetect.prototype.initialize=function(){this.effect=new pc.EdgeDetectEffect(this.app.graphicsDevice),this.effect.intensity=this.intensity,this.effect.color=this.color,this.on("attr",(function(t,e){this.effect[t]=e}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};pc.extend(pc,function(){var FxaaEffect=function(e){var o={aPosition:pc.SEMANTIC_POSITION},r=["attribute vec2 aPosition;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","}"].join("\n"),a=["precision "+e.precision+" float;","","uniform sampler2D uColorBuffer;","uniform vec2 uResolution;","","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","","void main()","{","    vec3 rgbNW = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * uResolution ).xyz;","    vec3 rgbNE = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * uResolution ).xyz;","    vec3 rgbSW = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * uResolution ).xyz;","    vec3 rgbSE = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * uResolution ).xyz;","    vec4 rgbaM  = texture2D( uColorBuffer,  gl_FragCoord.xy  * uResolution );","    vec3 rgbM  = rgbaM.xyz;","    float opacity  = rgbaM.w;","","    vec3 luma = vec3( 0.299, 0.587, 0.114 );","","    float lumaNW = dot( rgbNW, luma );","    float lumaNE = dot( rgbNE, luma );","    float lumaSW = dot( rgbSW, luma );","    float lumaSE = dot( rgbSE, luma );","    float lumaM  = dot( rgbM,  luma );","    float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","    float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","","    vec2 dir;","    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","","    float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","","    float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","    dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX), max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX), dir * rcpDirMin)) * uResolution;","","    vec3 rgbA = 0.5 * (","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * ( 1.0 / 3.0 - 0.5 ) ).xyz +","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * ( 2.0 / 3.0 - 0.5 ) ).xyz );","","    vec3 rgbB = rgbA * 0.5 + 0.25 * (","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * -0.5 ).xyz +","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * 0.5 ).xyz );","","    float lumaB = dot( rgbB, luma );","","    if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )","    {","        gl_FragColor = vec4( rgbA, opacity );","    }","    else","    {","        gl_FragColor = vec4( rgbB, opacity );","    }","}"].join("\n");this.fxaaShader=new pc.Shader(e,{attributes:o,vshader:r,fshader:a}),this.resolution=new Float32Array(2)};return(FxaaEffect=pc.inherits(FxaaEffect,pc.PostEffect)).prototype=pc.extend(FxaaEffect.prototype,{render:function(e,o,r){var a=this.device,t=a.scope;this.resolution[0]=1/e.width,this.resolution[1]=1/e.height,t.resolve("uResolution").setValue(this.resolution),t.resolve("uColorBuffer").setValue(e.colorBuffer),pc.drawFullscreenQuad(a,o,this.vertexBuffer,this.fxaaShader,r)}}),{FxaaEffect:FxaaEffect}}());var Fxaa=pc.createScript("fxaa");Fxaa.prototype.initialize=function(){this.effect=new pc.FxaaEffect(this.app.graphicsDevice);var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",(function(o){o?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};pc.extend(pc,function(){var HorizontalTiltShiftEffect=function(e){this.shader=new pc.Shader(e,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+e.precision+" float;","uniform sampler2D uColorBuffer;","uniform float uH;","uniform float uR;","varying vec2 vUv0;","void main() {","vec4 sum = vec4( 0.0 );","float hh = uH * abs( uR - vUv0.x );","sum += texture2D( uColorBuffer, vec2( vUv0.x - 4.0 * hh, vUv0.y ) ) * 0.051;","sum += texture2D( uColorBuffer, vec2( vUv0.x - 3.0 * hh, vUv0.y ) ) * 0.0918;","sum += texture2D( uColorBuffer, vec2( vUv0.x - 2.0 * hh, vUv0.y ) ) * 0.12245;","sum += texture2D( uColorBuffer, vec2( vUv0.x - 1.0 * hh, vUv0.y ) ) * 0.1531;","sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y ) ) * 0.1633;","sum += texture2D( uColorBuffer, vec2( vUv0.x + 1.0 * hh, vUv0.y ) ) * 0.1531;","sum += texture2D( uColorBuffer, vec2( vUv0.x + 2.0 * hh, vUv0.y ) ) * 0.12245;","sum += texture2D( uColorBuffer, vec2( vUv0.x + 3.0 * hh, vUv0.y ) ) * 0.0918;","sum += texture2D( uColorBuffer, vec2( vUv0.x + 4.0 * hh, vUv0.y ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")}),this.focus=.35};return(HorizontalTiltShiftEffect=pc.inherits(HorizontalTiltShiftEffect,pc.PostEffect)).prototype=pc.extend(HorizontalTiltShiftEffect.prototype,{render:function(e,t,o){var i=this.device,r=i.scope;r.resolve("uH").setValue(1/e.width),r.resolve("uR").setValue(this.focus),r.resolve("uColorBuffer").setValue(e.colorBuffer),pc.drawFullscreenQuad(i,t,this.vertexBuffer,this.shader,o)}}),{HorizontalTiltShiftEffect:HorizontalTiltShiftEffect}}());var HorizontalTiltShift=pc.createScript("horizontalTiltShift");HorizontalTiltShift.attributes.add("focus",{type:"number",default:.35,min:0,max:1,precision:5,title:"Focus"}),HorizontalTiltShift.prototype.initialize=function(){this.effect=new pc.HorizontalTiltShiftEffect(this.app.graphicsDevice),this.effect.focus=this.focus,this.on("attr:focus",(function(e){this.effect.focus=e}),this);var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};pc.extend(pc,function(){var HueSaturationEffect=function(t){this.shader=new pc.Shader(t,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+t.precision+" float;","uniform sampler2D uColorBuffer;","uniform float uHue;","uniform float uSaturation;","varying vec2 vUv0;","void main() {","gl_FragColor = texture2D( uColorBuffer, vUv0 );","float angle = uHue * 3.14159265;","float s = sin(angle), c = cos(angle);","vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;","float len = length(gl_FragColor.rgb);","gl_FragColor.rgb = vec3(","dot(gl_FragColor.rgb, weights.xyz),","dot(gl_FragColor.rgb, weights.zxy),","dot(gl_FragColor.rgb, weights.yzx)",");","float average = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;","if (uSaturation > 0.0) {","gl_FragColor.rgb += (average - gl_FragColor.rgb) * (1.0 - 1.0 / (1.001 - uSaturation));","} else {","gl_FragColor.rgb += (average - gl_FragColor.rgb) * (-uSaturation);","}","}"].join("\n")}),this.hue=0,this.saturation=0};return(HueSaturationEffect=pc.inherits(HueSaturationEffect,pc.PostEffect)).prototype=pc.extend(HueSaturationEffect.prototype,{render:function(t,e,r){var o=this.device,a=o.scope;a.resolve("uHue").setValue(this.hue),a.resolve("uSaturation").setValue(this.saturation),a.resolve("uColorBuffer").setValue(t.colorBuffer),pc.drawFullscreenQuad(o,e,this.vertexBuffer,this.shader,r)}}),{HueSaturationEffect:HueSaturationEffect}}());var HueSaturation=pc.createScript("hueSaturation");HueSaturation.attributes.add("hue",{type:"number",default:0,min:-1,max:1,precision:5,title:"Hue"}),HueSaturation.attributes.add("saturation",{type:"number",default:0,min:-1,max:1,precision:5,title:"Saturation"}),HueSaturation.prototype.initialize=function(){this.effect=new pc.HueSaturationEffect(this.app.graphicsDevice),this.effect.hue=this.hue,this.effect.saturation=this.saturation,this.on("attr",(function(t,e){this.effect[t]=e}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};pc.extend(pc,function(){var SepiaEffect=function(t){this.shader=new pc.Shader(t,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+t.precision+" float;","","uniform float uAmount;","uniform sampler2D uColorBuffer;","","varying vec2 vUv0;","","void main() {","    vec4 color = texture2D(uColorBuffer, vUv0);","    vec3 c = color.rgb;","","    color.r = dot(c, vec3(1.0 - 0.607 * uAmount, 0.769 * uAmount, 0.189 * uAmount));","    color.g = dot(c, vec3(0.349 * uAmount, 1.0 - 0.314 * uAmount, 0.168 * uAmount));","    color.b = dot(c, vec3(0.272 * uAmount, 0.534 * uAmount, 1.0 - 0.869 * uAmount));","","    gl_FragColor = vec4(min(vec3(1.0), color.rgb), color.a);","}"].join("\n")}),this.amount=1};return(SepiaEffect=pc.inherits(SepiaEffect,pc.PostEffect)).prototype=pc.extend(SepiaEffect.prototype,{render:function(t,e,o){var i=this.device,n=i.scope;n.resolve("uAmount").setValue(this.amount),n.resolve("uColorBuffer").setValue(t.colorBuffer),pc.drawFullscreenQuad(i,e,this.vertexBuffer,this.shader,o)}}),{SepiaEffect:SepiaEffect}}());var Sepia=pc.createScript("sepia");Sepia.attributes.add("amount",{type:"number",default:1,min:0,max:1,title:"Amount"}),Sepia.prototype.initialize=function(){this.effect=new pc.SepiaEffect(this.app.graphicsDevice),this.effect.amount=this.amount,this.on("attr:amount",(function(t){this.effect.amount=t}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};pc.extend(pc,function(){var LuminosityEffect=function(e){this.shader=new pc.Shader(e,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+e.precision+" float;","","uniform sampler2D uColorBuffer;","","varying vec2 vUv0;","","void main() {","vec4 texel = texture2D(uColorBuffer, vUv0);","vec3 luma = vec3(0.299, 0.587, 0.114);","float v = dot(texel.xyz, luma);","gl_FragColor = vec4(v, v, v, texel.w);","}"].join("\n")})};return(LuminosityEffect=pc.inherits(LuminosityEffect,pc.PostEffect)).prototype=pc.extend(LuminosityEffect.prototype,{render:function(e,t,i){var o=this.device;o.scope.resolve("uColorBuffer").setValue(e.colorBuffer),pc.drawFullscreenQuad(o,t,this.vertexBuffer,this.shader,i)}}),{LuminosityEffect:LuminosityEffect}}());var Luminosity=pc.createScript("luminosity");Luminosity.prototype.initialize=function(){this.effect=new pc.LuminosityEffect(this.app.graphicsDevice);var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};pc.extend(pc,function(){var VerticalTiltShiftEffect=function(e){this.shader=new pc.Shader(e,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+e.precision+" float;","uniform sampler2D uColorBuffer;","uniform float uV;","uniform float uR;","varying vec2 vUv0;","void main() {","vec4 sum = vec4( 0.0 );","float vv = uV * abs( uR - vUv0.y );","sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y - 4.0 * vv ) ) * 0.051;","sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y - 3.0 * vv ) ) * 0.0918;","sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y - 2.0 * vv ) ) * 0.12245;","sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y - 1.0 * vv ) ) * 0.1531;","sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y ) ) * 0.1633;","sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y + 1.0 * vv ) ) * 0.1531;","sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y + 2.0 * vv ) ) * 0.12245;","sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y + 3.0 * vv ) ) * 0.0918;","sum += texture2D( uColorBuffer, vec2( vUv0.x, vUv0.y + 4.0 * vv ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")}),this.focus=.35};return(VerticalTiltShiftEffect=pc.inherits(VerticalTiltShiftEffect,pc.PostEffect)).prototype=pc.extend(VerticalTiltShiftEffect.prototype,{render:function(e,t,v){var i=this.device,r=i.scope;r.resolve("uV").setValue(1/e.height),r.resolve("uR").setValue(this.focus),r.resolve("uColorBuffer").setValue(e.colorBuffer),pc.drawFullscreenQuad(i,t,this.vertexBuffer,this.shader,v)}}),{VerticalTiltShiftEffect:VerticalTiltShiftEffect}}());var VerticalTiltShift=pc.createScript("verticalTiltShift");VerticalTiltShift.attributes.add("focus",{type:"number",default:.35,min:0,max:1,precision:5,title:"Focus"}),VerticalTiltShift.prototype.initialize=function(){this.effect=new pc.VerticalTiltShiftEffect(this.app.graphicsDevice),this.effect.focus=this.focus,this.on("attr:focus",(function(e){this.effect.focus=e}),this);var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};pc.extend(pc,function(){var VignetteEffect=function(e){var t={aPosition:pc.SEMANTIC_POSITION},i=["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),s=["precision "+e.precision+" float;","","uniform sampler2D uColorBuffer;","uniform float uDarkness;","uniform float uOffset;","","varying vec2 vUv0;","","void main() {","    vec4 texel = texture2D(uColorBuffer, vUv0);","    vec2 uv = (vUv0 - vec2(0.5)) * vec2(uOffset);","    gl_FragColor = vec4(mix(texel.rgb, vec3(1.0 - uDarkness), dot(uv, uv)), texel.a);","}"].join("\n");this.vignetteShader=new pc.Shader(e,{attributes:t,vshader:i,fshader:s}),this.offset=1,this.darkness=1};return(VignetteEffect=pc.inherits(VignetteEffect,pc.PostEffect)).prototype=pc.extend(VignetteEffect,{render:function(e,t,i){var s=this.device,f=s.scope;f.resolve("uColorBuffer").setValue(e.colorBuffer),f.resolve("uOffset").setValue(this.offset),f.resolve("uDarkness").setValue(this.darkness),pc.drawFullscreenQuad(s,t,this.vertexBuffer,this.vignetteShader,i)}}),{VignetteEffect:VignetteEffect}}());var Vignette=pc.createScript("vignette");Vignette.attributes.add("offset",{type:"number",default:1,min:0,precision:5,title:"Offset"}),Vignette.attributes.add("darkness",{type:"number",default:1,precision:5,title:"Darkness"}),Vignette.prototype.initialize=function(){this.effect=new pc.VignetteEffect(this.app.graphicsDevice),this.effect.offset=this.offset,this.effect.darkness=this.darkness,this.on("attr",(function(e,t){this.effect[e]=t}),this);var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};pc.extend(pc,function(){var BlendEffect=function(e){this.shader=new pc.Shader(e,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+e.precision+" float;","","uniform float uMixRatio;","uniform sampler2D uColorBuffer;","uniform sampler2D uBlendMap;","","varying vec2 vUv0;","","void main(void)","{","    vec4 texel1 = texture2D(uColorBuffer, vUv0);","    vec4 texel2 = texture2D(uBlendMap, vUv0);","    gl_FragColor = mix(texel1, texel2, uMixRatio);","}"].join("\n")}),this.mixRatio=.5,this.blendMap=new pc.Texture(e)};return(BlendEffect=pc.inherits(BlendEffect,pc.PostEffect)).prototype=pc.extend(BlendEffect.prototype,{render:function(e,t,i){var o=this.device,n=o.scope;n.resolve("uMixRatio").setValue(this.mixRatio),n.resolve("uColorBuffer").setValue(e.colorBuffer),n.resolve("uBlendMap").setValue(this.blendMap),pc.drawFullscreenQuad(o,t,this.vertexBuffer,this.shader,i)}}),{BlendEffect:BlendEffect}}());var Blend=pc.createScript("blend");Blend.attributes.add("mixRatio",{type:"number",default:1,min:0,max:1,precision:5,title:"Mix Ratio"}),Blend.attributes.add("blendMap",{type:"asset",assetType:"texture",title:"Blend Map"}),Blend.prototype.initialize=function(){this.effect=new pc.BlendEffect(this.app.graphicsDevice),this.effect.mixRatio=this.mixRatio,this.effect.blendMap=this.blendMap.resource;var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)})),this.on("attr:mixRatio",(function(e){this.effect.mixRatio=e}),this),this.on("attr:blendMap",(function(e){this.effect.blendMap=e?e.resource:null}),this)};pc.extend(pc,function(){function computeGaussian(e,t){return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-e*e/(2*t*t))}function calculateBlurValues(e,t,s,o,r){e[0]=computeGaussian(0,r),t[0]=0,t[1]=0;var i,a,l=e[0];for(i=0,a=Math.floor(7.5);i<a;i++){var u=computeGaussian(i+1,r);e[2*i]=u,e[2*i+1]=u,l+=2*u;var h=2*i+1.5;t[4*i]=s*h,t[4*i+1]=o*h,t[4*i+2]=-s*h,t[4*i+3]=-o*h}for(i=0,a=e.length;i<a;i++)e[i]/=l}var BloomEffect=function(e){var t={aPosition:pc.SEMANTIC_POSITION},s=["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition + 1.0) * 0.5;","}"].join("\n"),o=["precision "+e.precision+" float;","","varying vec2 vUv0;","","uniform sampler2D uBaseTexture;","uniform float uBloomThreshold;","","void main(void)","{","    vec4 color = texture2D(uBaseTexture, vUv0);","","    gl_FragColor = clamp((color - uBloomThreshold) / (1.0 - uBloomThreshold), 0.0, 1.0);","}"].join("\n"),r=["precision "+e.precision+" float;","","#define SAMPLE_COUNT 15","","varying vec2 vUv0;","","uniform sampler2D uBloomTexture;","uniform vec2 uBlurOffsets[SAMPLE_COUNT];","uniform float uBlurWeights[SAMPLE_COUNT];","","void main(void)","{","    vec4 color = vec4(0.0);","    for (int i = 0; i < SAMPLE_COUNT; i++)","    {","        color += texture2D(uBloomTexture, vUv0 + uBlurOffsets[i]) * uBlurWeights[i];","    }","","    gl_FragColor = color;","}"].join("\n"),i=["precision "+e.precision+" float;","","varying vec2 vUv0;","","uniform float uBloomEffectIntensity;","uniform sampler2D uBaseTexture;","uniform sampler2D uBloomTexture;","","void main(void)","{","    vec4 bloom = texture2D(uBloomTexture, vUv0) * uBloomEffectIntensity;","    vec4 base = texture2D(uBaseTexture, vUv0);","","    base *= (1.0 - clamp(bloom, 0.0, 1.0));","","    gl_FragColor = base + bloom;","}"].join("\n");this.extractShader=new pc.Shader(e,{attributes:t,vshader:s,fshader:o}),this.blurShader=new pc.Shader(e,{attributes:t,vshader:s,fshader:r}),this.combineShader=new pc.Shader(e,{attributes:t,vshader:s,fshader:i});var a=e.width,l=e.height;this.targets=[];for(var u=0;u<2;u++){var h=new pc.Texture(e,{format:pc.PIXELFORMAT_R8_G8_B8_A8,width:a>>1,height:l>>1});h.minFilter=pc.FILTER_LINEAR,h.magFilter=pc.FILTER_LINEAR,h.addressU=pc.ADDRESS_CLAMP_TO_EDGE,h.addressV=pc.ADDRESS_CLAMP_TO_EDGE;var n=new pc.RenderTarget(e,h,{depth:!1});this.targets.push(n)}this.bloomThreshold=.25,this.blurAmount=4,this.bloomIntensity=1.25,this.sampleWeights=new Float32Array(15),this.sampleOffsets=new Float32Array(30)};return(BloomEffect=pc.inherits(BloomEffect,pc.PostEffect)).prototype=pc.extend(BloomEffect.prototype,{render:function(e,t,s){var o=this.device,r=o.scope;r.resolve("uBloomThreshold").setValue(this.bloomThreshold),r.resolve("uBaseTexture").setValue(e.colorBuffer),pc.drawFullscreenQuad(o,this.targets[0],this.vertexBuffer,this.extractShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,1/this.targets[1].width,0,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),pc.drawFullscreenQuad(o,this.targets[1],this.vertexBuffer,this.blurShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,0,1/this.targets[0].height,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[1].colorBuffer),pc.drawFullscreenQuad(o,this.targets[0],this.vertexBuffer,this.blurShader),r.resolve("uBloomEffectIntensity").setValue(this.bloomIntensity),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),r.resolve("uBaseTexture").setValue(e.colorBuffer),pc.drawFullscreenQuad(o,t,this.vertexBuffer,this.combineShader,s)}}),{BloomEffect:BloomEffect}}());var Bloom=pc.createScript("bloom");Bloom.attributes.add("bloomIntensity",{type:"number",default:1,min:0,title:"Intensity"}),Bloom.attributes.add("bloomThreshold",{type:"number",default:.25,min:0,max:1,precision:2,title:"Threshold"}),Bloom.attributes.add("blurAmount",{type:"number",default:4,min:1,title:"Blur amount"}),Bloom.prototype.initialize=function(){this.effect=new pc.BloomEffect(this.app.graphicsDevice),this.effect.bloomThreshold=this.bloomThreshold,this.effect.blurAmount=this.blurAmount,this.effect.bloomIntensity=this.bloomIntensity;var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("attr",(function(e,t){this.effect[e]=t}),this),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};pc.extend(pc,function(){var BokehEffect=function(e){this.needsDepthBuffer=!0,this.shader=new pc.Shader(e,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+e.precision+" float;","","varying vec2 vUv0;","","uniform sampler2D uColorBuffer;","uniform sampler2D uDepthMap;","","uniform float uMaxBlur;","uniform float uAperture;","","uniform float uFocus;","uniform float uAspect;","","void main()","{","    vec2 aspectCorrect = vec2( 1.0, uAspect );","","    vec4 depth1 = texture2D( uDepthMap, vUv0 );","","    float factor = depth1.x - uFocus;","","    vec2 dofblur = vec2 ( clamp( factor * uAperture, -uMaxBlur, uMaxBlur ) );","","    vec2 dofblur9 = dofblur * 0.9;","    vec2 dofblur7 = dofblur * 0.7;","    vec2 dofblur4 = dofblur * 0.4;","","    vec4 col;","","    col  = texture2D( uColorBuffer, vUv0 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.0,   0.4  ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.15,  0.37 ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.29,  0.29 ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.37,  0.15 ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.40,  0.0  ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.37, -0.15 ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.29, -0.29 ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.15, -0.37 ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.0,  -0.4  ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.15,  0.37 ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.29,  0.29 ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.37,  0.15 ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.4,   0.0  ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.37, -0.15 ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.29, -0.29 ) * aspectCorrect ) * dofblur );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.15, -0.37 ) * aspectCorrect ) * dofblur );","","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.15,  0.37 ) * aspectCorrect ) * dofblur9 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.37,  0.15 ) * aspectCorrect ) * dofblur9 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.37, -0.15 ) * aspectCorrect ) * dofblur9 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.15, -0.37 ) * aspectCorrect ) * dofblur9 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.15,  0.37 ) * aspectCorrect ) * dofblur9 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.37,  0.15 ) * aspectCorrect ) * dofblur9 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.37, -0.15 ) * aspectCorrect ) * dofblur9 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.15, -0.37 ) * aspectCorrect ) * dofblur9 );","","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.29,  0.29 ) * aspectCorrect ) * dofblur7 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.40,  0.0  ) * aspectCorrect ) * dofblur7 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.29, -0.29 ) * aspectCorrect ) * dofblur7 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.0,  -0.4  ) * aspectCorrect ) * dofblur7 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.29,  0.29 ) * aspectCorrect ) * dofblur7 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.4,   0.0  ) * aspectCorrect ) * dofblur7 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.29, -0.29 ) * aspectCorrect ) * dofblur7 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.0,   0.4  ) * aspectCorrect ) * dofblur7 );","","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.29,  0.29 ) * aspectCorrect ) * dofblur4 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.4,   0.0  ) * aspectCorrect ) * dofblur4 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.29, -0.29 ) * aspectCorrect ) * dofblur4 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.0,  -0.4  ) * aspectCorrect ) * dofblur4 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.29,  0.29 ) * aspectCorrect ) * dofblur4 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.4,   0.0  ) * aspectCorrect ) * dofblur4 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2( -0.29, -0.29 ) * aspectCorrect ) * dofblur4 );","    col += texture2D( uColorBuffer, vUv0 + ( vec2(  0.0,   0.4  ) * aspectCorrect ) * dofblur4 );","","    gl_FragColor = col / 41.0;","    gl_FragColor.a = 1.0;","}"].join("\n")}),this.maxBlur=1,this.aperture=.025,this.focus=1,this.aspect=1};return(BokehEffect=pc.inherits(BokehEffect,pc.PostEffect)).prototype=pc.extend(BokehEffect.prototype,{render:function(e,r,t){var o=this.device,u=o.scope;u.resolve("uMaxBlur").setValue(this.maxBlur),u.resolve("uAperture").setValue(this.aperture),u.resolve("uFocus").setValue(this.focus),u.resolve("uAspect").setValue(this.aspect),u.resolve("uColorBuffer").setValue(e.colorBuffer),u.resolve("uDepthMap").setValue(this.depthMap),pc.drawFullscreenQuad(o,r,this.vertexBuffer,this.shader,t)}}),{BokehEffect:BokehEffect}}());var Bokeh=pc.createScript("bokeh");Bokeh.attributes.add("maxBlur",{type:"number",default:1,min:0,max:1,precision:5,title:"Max Blur"}),Bokeh.attributes.add("aperture",{type:"number",default:.025,min:0,max:1,precision:5,title:"Aperture"}),Bokeh.attributes.add("focus",{type:"number",default:1,title:"Focus"}),Bokeh.attributes.add("aspect",{type:"number",default:1,title:"Aspect"}),Bokeh.prototype.initialize=function(){this.effect=new pc.BokehEffect(this.app.graphicsDevice),this.effect.maxBlur=this.maxBlur,this.effect.aperture=this.aperture,this.effect.focus=this.focus,this.effect.aspect=this.aspect,this.on("attr",(function(e,r){this.effect[e]=r}),this);var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",(function(r){r?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};pc.extend(pc,function(){var BrightnessContrastEffect=function(t){this.shader=new pc.Shader(t,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+t.precision+" float;","uniform sampler2D uColorBuffer;","uniform float uBrightness;","uniform float uContrast;","varying vec2 vUv0;","void main() {","gl_FragColor = texture2D( uColorBuffer, vUv0 );","gl_FragColor.rgb += uBrightness;","if (uContrast > 0.0) {","gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - uContrast) + 0.5;","} else {","gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + uContrast) + 0.5;","}","}"].join("\n")}),this.brightness=0,this.contrast=0};return(BrightnessContrastEffect=pc.inherits(BrightnessContrastEffect,pc.PostEffect)).prototype=pc.extend(BrightnessContrastEffect.prototype,{render:function(t,e,r){var s=this.device,i=s.scope;i.resolve("uBrightness").setValue(this.brightness),i.resolve("uContrast").setValue(this.contrast),i.resolve("uColorBuffer").setValue(t.colorBuffer),pc.drawFullscreenQuad(s,e,this.vertexBuffer,this.shader,r)}}),{BrightnessContrastEffect:BrightnessContrastEffect}}());var BrightnessContrast=pc.createScript("brightnessContrast");BrightnessContrast.attributes.add("brightness",{type:"number",default:0,min:-1,max:1,precision:5,title:"Brightness"}),BrightnessContrast.attributes.add("contrast",{type:"number",default:0,min:-1,max:1,precision:5,title:"Contrast"}),BrightnessContrast.prototype.initialize=function(){this.effect=new pc.BrightnessContrastEffect(this.app.graphicsDevice),this.effect.brightness=this.brightness,this.effect.contrast=this.contrast,this.on("attr",(function(t,e){this.effect[t]=e}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};var btn=pc.createScript("btn");btn.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),btn.attributes.add("html",{type:"asset",assetType:"html",title:"HTML Asset"}),btn.attributes.add("textureNormal",{type:"asset",assetType:"texture"}),btn.attributes.add("textureHovered",{type:"asset",assetType:"texture"}),btn.attributes.add("texturePressed",{type:"asset",assetType:"texture"}),btn.attributes.add("pos",{type:"vec2",description:"The coordinate in pixels",placeholder:["x","y"]}),btn.attributes.add("size",{type:"vec2",description:"The size of sprite in pixels",placeholder:["w","h"],default:[128,128]}),btn.attributes.add("anchor",{type:"number",default:0,description:"The anchor of the sprite related to the screen bounds",enum:[{topLeft:0},{topCenter:1},{topRight:2},{Centerleft:3},{CenterCenter:4},{CenterRight:5},{BottomLeft:6},{BottomCenter:7},{BottomRight:8}]}),btn.attributes.add("pivot",{type:"number",default:0,description:"The pivot point of the sprite",enum:[{topLeft:0},{topCenter:1},{topRight:2},{Centerleft:3},{CenterCenter:4},{CenterRight:5},{BottomLeft:6},{BottomCenter:7},{BottomRight:8}]}),btn.attributes.add("event_name",{type:"string"}),btn.prototype.initialize=function(){this.div=document.createElement("div"),this.div.classList.add("container"),this.div.innerHTML=this.html.resource||"",this.div.innerHTML=this.div.innerHTML.replace("asset-tag-id",this.entity.name),document.body.appendChild(this.div),this.style=document.createElement("style"),this.style.innerHTML=this.css.resource,this.style.innerHTML=this.style.innerHTML.replace("asset-tag-normal",this.textureNormal.getFileUrl()),this.style.innerHTML=this.style.innerHTML.replace("asset-tag-id",this.entity.name),document.head.appendChild(this.style);var t=this.div.querySelector(".button");t.style.backgroundSize=this.size.x+"px "+this.size.y+"px",t.style.width=this.size.x+"px",t.style.height=this.size.y+"px",this.AnchorOffset(t),this.PivotOffset(t),this.btn_click(t),this.on("destroy",(function(){document.body.removeChild(this.div),document.head.appendChild(this.style)}))},btn.prototype.btn_click=function(t){var e=this;t.addEventListener("click",(function(){e.app.fire(e.event_name,e.event_name)}),!1)},btn.prototype.update=function(t){},btn.prototype.AnchorOffset=function(t){switch(this.anchor){case 0:t.style.left="0%",t.style.top="0%";break;case 1:t.style.left="50%",t.style.top="0%";break;case 2:t.style.left="100%",t.style.top="0%";break;case 3:t.style.left="0%",t.style.top="50%";break;case 4:t.style.left="50%",t.style.top="50%";break;case 5:t.style.left="100%",t.style.top="50%";break;case 6:t.style.left="0%",t.style.top="100%";break;case 7:t.style.left="50%",t.style.top="100%";break;case 8:t.style.left="100%",t.style.top="100%";break;default:console.error("Wrong anchor: "+this.anchor)}},btn.prototype.PivotOffset=function(t){var e=this.pos.x,s=this.pos.y;switch(this.pivot){case 0:e=this.pos.x,s=this.pos.y;break;case 1:e=this.pos.x-this.size.x/2,s=this.pos.y;break;case 2:e=this.pos.x-this.size.x,s=this.pos.y;break;case 3:e=this.pos.x,s=this.pos.y-this.size.y/2;break;case 4:e=this.pos.x-this.size.x/2,s=this.pos.y-this.size.y/2;break;case 5:e=this.pos.x-this.size.x,s=this.pos.y-this.size.y/2;break;case 6:e=this.pos.x,s=this.pos.y-this.size.y;break;case 7:e=this.pos.x-this.size.x/2,s=this.pos.y-this.size.y;break;case 8:e=this.pos.x-this.size.x,s=this.pos.y-this.size.y;break;default:console.error("Wrong pivot: "+this.pivot)}t.style.transform="translate("+e+"px, "+s+"px)"};var SwitchingMaterials=pc.createScript("switchingMaterials");SwitchingMaterials.attributes.add("materials",{type:"asset",assetType:"material",array:!0,title:"Materials"}),SwitchingMaterials.prototype.initialize=function(){this.materialIndex=0,console.log(this.entity.children.length)},SwitchingMaterials.prototype.update=function(t){},SwitchingMaterials.prototype.changeToNextMaterial=function(){var t=this.materials[this.materialIndex];this.materialIndex=(this.materialIndex+1)%this.materials.length;for(var i=this.materials[this.materialIndex],e=0;e<this.entity.children.length;e++)if(this.entity.children[e].model&&this.changeMaterial(this.entity.children[e].model.meshInstances,i,t),this.entity.children[e].children.length>=1)for(var a=0;a<this.entity.children[e].children.length;a++)this.entity.children[e].children[a].model&&this.changeMaterial(this.entity.children[e].children[a].model.meshInstances,i,t)},SwitchingMaterials.prototype.changeMaterial=function(t,i,e){if(t)for(var a=0;a<t.length;++a){var n=t[a];n&&n.material.name==e.name&&(n.material=i.resource)}};var Main=pc.createScript("main");Main.prototype.initialize=function(){pc.app.root.findByName("Camera").camera.enabled=!0;var e=this,f_fullscreen=function(){var n=window.document;e.app.isFullscreen()?e.app.disableFullscreen():e.app.enableFullscreen(n.body)},openURL=function(){window.open("https://www.baidu.com")};this.app.on("material",this.onMaterial),this.app.on("fullscreen",f_fullscreen),this.app.on("lightOnOff",this.onLight),this.app.on("gohome",openURL),this.on("destroy",(function(){this.app.off("material",this.onMaterial),this.app.off("fullscreen",f_fullscreen),this.app.off("lightOnOff",this.onLight),this.app.off("gohome",openURL)}))},Main.prototype.onHome=function(){window.open("https://www.realroadc.com")},Main.prototype.onLight=function(){var e=pc.app.root.findByName("Front_Light"),n=pc.app.root.findByName("Rear_Light");e.enabled=!e.enabled,n.enabled=!n.enabled},Main.prototype.update=function(e){},Main.prototype.onFullscreen=function(){var e=window.document;e.fullscreenElement?e.exitFullscreen&&e.exitFullscreen():e.documentElement.requestFullscreen()},Main.prototype.onMaterial=function(){var e=pc.app.root.findByName("Car");if(e){var n=e.script.switchingMaterials;n&&n.changeToNextMaterial()}},Main.prototype.toggleFullScreen=function(){var e=window.document;e.fullscreenElement?e.exitFullscreen&&e.exitFullscreen():e.documentElement.requestFullscreen()};var RotAnim=pc.createScript("rotAnim"),CLOSED=0,OPEN=1;RotAnim.attributes.add("rotspeed",{type:"number",default:.7,title:"rotate for sec X",description:"초당 회전수 x"}),RotAnim.attributes.add("close",{type:"vec3",default:[0,0,0],title:"close",description:"닫는 각도"}),RotAnim.attributes.add("open",{type:"vec3",default:[0,0,0],title:"open",description:"여는 각도"}),RotAnim.attributes.add("event_name",{type:"string"}),RotAnim.prototype.initialize=function(){this.rOpen=new pc.Quat(0,0,0,1),this.rClose=new pc.Quat(0,0,0,1),this.AnimPercent=CLOSED,this.AnimState=CLOSED,this.app.on(this.event_name,this.toggle),this.on("destroy",(function(){this.app.off(this.event_name,this.toggle)})),this.rOpen.setFromEulerAngles(this.open.x,this.open.y,this.open.z),this.rClose.setFromEulerAngles(this.close.x,this.close.y,this.close.z),this.entity.name=this.event_name},RotAnim.prototype.toggle=function(t){var e=pc.app.root.findByName(t).script.rotAnim;e.AnimState=e.AnimState===CLOSED?OPEN:CLOSED},RotAnim.prototype.update=function(t){if(this.AnimPercent!=this.AnimState){var e=this.AnimState==CLOSED?-1:1;this.AnimPercent=this.AnimPercent+t*this.rotspeed*e,this.AnimState==CLOSED&&this.AnimPercent<CLOSED&&(this.AnimPercent=CLOSED),this.AnimState==OPEN&&this.AnimPercent>OPEN&&(this.AnimPercent=OPEN);var i=this.rOpen,n=this.rClose,s=this.entity.getLocalRotation();s.slerp(n,i,this.AnimPercent),this.entity.setLocalRotation(s)}};var Hotspot=pc.createScript("hotspot");Hotspot.attributes.add("cameraEntity",{type:"entity",title:"Camera Entity"}),Hotspot.attributes.add("radius",{type:"number",default:.45,title:"Radius"}),Hotspot.attributes.add("opacity",{type:"number",title:"opacity"}),Hotspot.attributes.add("Dir",{type:"number",default:1,title:"Dir"}),Hotspot.attributes.add("fadeDropOff",{type:"number",default:.4,title:"Fade Drop Off",description:"When to start fading out hotspot relative to the camera direction. 1 for when hotspot is directly inline with the camera. 0 for never."}),Hotspot.prototype.initialize=function(){this.hitArea=new pc.BoundingSphere(this.entity.getPosition(),this.radius),this.ray=new pc.Ray,this.defaultForwardDirection=this.entity.forward.clone(),this.directionToCamera=new pc.Vec3,this.sprite=this.entity.children[0],this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.on("destroy",(function(){this.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStart,this)}))),this.on("destroy",(function(){this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onMouseDown,this)}))},Hotspot.prototype.update=function(t){var i=this.cameraEntity.getPosition();this.directionToCamera.sub2(i,this.entity.getPosition()),this.directionToCamera.normalize();var e=this.Dir*this.directionToCamera.dot(this.defaultForwardDirection);if(e<0)this.sprite.enabled&&(this.sprite.enabled=!1);else{this.sprite.enabled||(this.sprite.enabled=!0);for(var o=this.sprite.model.meshInstances,s=pc.math.clamp(e/this.fadeDropOff,0,this.opacity),a=0;a<o.length;++a)o[a].setParameter("material_opacity",s)}},Hotspot.prototype.doRayCast=function(t){this.sprite.enabled&&(this.cameraEntity.camera.screenToWorld(t.x,t.y,this.cameraEntity.camera.farClip,this.ray.direction),this.ray.origin.copy(this.cameraEntity.getPosition()),this.ray.direction.sub(this.ray.origin).normalize(),this.hitArea.intersectsRay(this.ray)&&this.entity.fire("pulse:start"))},Hotspot.prototype.onMouseDown=function(t){t.button==pc.MOUSEBUTTON_LEFT&&this.doRayCast(t)},Hotspot.prototype.onTouchStart=function(t){1==t.touches.length&&(this.doRayCast(t.touches[0]),t.event.preventDefault())};var Pulse=pc.createScript("pulse");Pulse.attributes.add("event_name",{type:"string"}),Pulse.attributes.add("event_name2",{type:"string"}),Pulse.attributes.add("pulseTimeSecs",{type:"number",default:2,title:"Pulse Time Secs"}),Pulse.prototype.initialize=function(){this.entity.on("pulse:start",this.onStartEvent,this),this.on("destroy",(function(){this.entity.off("pulse:start",this.onStartEvent)})),this.startScale=this.entity.getLocalScale().clone(),this.scale=new pc.Vec3,this.time=0},Pulse.prototype.update=function(t){this.time+=t,this.time>this.pulseTimeSecs&&(this.time-=this.pulseTimeSecs);var e=this.time/this.pulseTimeSecs,s=.3*(2*Math.abs(e-.5))+.7,i=this.entity.getLocalScale();i.set(s,s,s),this.entity.setLocalScale(i)},Pulse.prototype.onStartEvent=function(){this.secsSinceStart=0;var t=this;console.log(t.event_name),t.app.fire(t.event_name,t.event_name),t.app.fire(t.event_name2,t.event_name2)};var ManagerCamera=pc.createScript("managerCamera");ManagerCamera.attributes.add("camera_In_event_name",{type:"string"}),ManagerCamera.attributes.add("camera_Out_event_name",{type:"string"}),ManagerCamera.attributes.add("entitys",{type:"entity",assetType:"entity",array:!0,title:"entitys"}),ManagerCamera.prototype.initialize=function(){this.orbitCamera=this.entity.script.orbitCamera,this.mouseInput=this.entity.script.mouseInput,this.app.on(this.camera_In_event_name,this.camera_In),this.app.on(this.camera_Out_event_name,this.camera_Out),this.on("destroy",(function(){this.app.off(this.camera_In_event_name,this.camera_In),this.app.off(this.camera_Out_event_name,this.camera_Out)})),this.app.ManagerCamera=this,setTimeout((function(){var a=pc.app.root.findByName("Camera2");a.script.lookCamera.enabled=!1,a.camera.enabled=!1}),100)},ManagerCamera.prototype.update=function(a){this.app.keyboard.wasPressed(pc.KEY_1)&&this.camera_Out("camera_Out_event_name")},ManagerCamera.prototype.camera_Out=function(a){var t=pc.app.root.findByName("Camera"),e=pc.app.root.findByName("Camera2");pc.app.root.findByName("Spot_L_Door_In").enabled=!1,pc.app.root.findByName("left:open").script.rotAnim.AnimState=1,setTimeout((function(){e.script.cameraPath.AnimStart((function(){e.camera.priority=0,e.script.enabled=!1,e.script.lookCamera.enabled=!1,e.camera.enabled=!1,t.script.orbitCamera.enabled=!0,t.script.mouseInput.SetInput(!0),t.script.touchInput.SetInput(!0),console.log(t.script.orbitCamera.enabled)}))}),1e3),setTimeout((function(){var a=pc.app.root.findByName("left:open"),t=a.script.rotAnim;t.AnimState=0,(t=(a=pc.app.root.findByName("right:open")).script.rotAnim).AnimState=0,pc.app.root.findByName("Spot_L_Door").enabled=!0,pc.app.root.findByName("Spot_R_Door").enabled=!0}),3e3)},ManagerCamera.prototype.camera_In=function(a){var t=pc.app.root.findByName("Camera"),e=pc.app.root.findByName("Camera2");t.script.mouseInput.SetInput(!1),t.script.touchInput.SetInput(!1),e.script.enabled=!0,e.camera.enabled=!0,pc.app.root.findByName("Spot_L_Door").enabled=!1,pc.app.root.findByName("Spot_R_Door").enabled=!1,t.script.cameraPath.AnimStart((function(){e.script.lookCamera.enabled=!0,e.script.lookCamera._resettarget(),e.camera.priority=6,console.log(t.script.orbitCamera.enabled)})),setTimeout((function(){var a=pc.app.root.findByName("left:open"),t=a.script.rotAnim;t.AnimState=0,(t=(a=pc.app.root.findByName("right:open")).script.rotAnim).AnimState=0,pc.app.root.findByName("Spot_L_Door_In").enabled=!0}),2e3)};var CameraPath=pc.createScript("cameraPath");CameraPath.attributes.add("pathRoot",{type:"entity",title:"Path Root"}),CameraPath.attributes.add("duration",{type:"number",default:10,title:"Duration Secs"}),CameraPath.attributes.add("startTime",{type:"number",default:0,title:"Start Time (Secs)",description:"Start the path from a specific point in time"}),CameraPath.prototype.initialize=function(){this.on("attr:pathRoot",(function(t,i){t&&(this.createPath(),this.time=0)})),this.on("attr:time",(function(t,i){this.time=pc.math.clamp(this.startTime,0,this.duration)})),this.time=pc.math.clamp(this.startTime,0,this.duration),this.lookAt=new pc.Vec3,this.up=new pc.Vec3,this.callback=null},CameraPath.prototype.AnimStart=function(t){this.createPath(),this.bIsStart=!0,this.time=0,this.callback=t},CameraPath.prototype.update=function(t){if(this.bIsStart){this.time+=t,this.time>=this.duration&&(this.time=0,this.bIsStart=!1,this.callback());var i;i=this.time/this.duration,this.entity.setPosition(this.px.value(i),this.py.value(i),this.pz.value(i)),this.lookAt.set(this.tx.value(i),this.ty.value(i),this.tz.value(i)),this.up.set(this.ux.value(i),this.uy.value(i),this.uz.value(i)),this.entity.lookAt(this.lookAt,this.up)}},CameraPath.prototype.node_update=function(){var t=this.pathRoot.children,e=0,a=[],h=new pc.Vec3;for(a.push(0),t.unshift(this.entity),i=1;i<t.length;i++){var s=t[i-1],p=t[i];h.sub2(s.getPosition(),p.getPosition()),e+=h.length(),a.push(e)}for(i=0;i<t.length;i++){var r=a[i]/e,u=t[i],n=u.getPosition();this.px.add(r,n.x),this.py.add(r,n.y),this.pz.add(r,n.z);var o=n.clone().add(u.forward);this.tx.add(r,o.x),this.ty.add(r,o.y),this.tz.add(r,o.z);var c=u.up;this.ux.add(r,c.x),this.uy.add(r,c.y),this.uz.add(r,c.z)}},CameraPath.prototype.createPath=function(){var t=pc.CURVE_SMOOTHSTEP;this.px=new pc.Curve,this.px.type=t,this.py=new pc.Curve,this.py.type=t,this.pz=new pc.Curve,this.pz.type=t,this.tx=new pc.Curve,this.tx.type=t,this.ty=new pc.Curve,this.ty.type=t,this.tz=new pc.Curve,this.tz.type=t,this.ux=new pc.Curve,this.ux.type=t,this.uy=new pc.Curve,this.uy.type=t,this.uz=new pc.Curve,this.uz.type=t,this.node_update()};var Billboard=pc.createScript("billboard");Billboard.attributes.add("cameraEntity",{type:"entity",title:"Camera Entity"}),Billboard.prototype.initialize=function(){this.camera=this.cameraEntity},Billboard.prototype.update=function(t){this.entity.setRotation(this.camera.getRotation()),this.entity.rotateLocal(90,0,0)},Billboard.prototype.swap=function(t){};var LookCamera=pc.createScript("lookCamera");LookCamera.attributes.add("mouseLookSensitivity",{type:"number",default:0,title:"Mouse Look Sensitivity"}),LookCamera.attributes.add("touchLookSensitivity",{type:"number",default:0,title:"Touch Look Sensitivity"}),LookCamera.attributes.add("snappinessFactor",{type:"number",default:.1,title:"Snappiness Factor",description:"Lower is faster"}),LookCamera.prototype.initialize=function(){var t=this;this._tempQuat1=new pc.Quat,this._tempQuat2=new pc.Quat,this._tempVec3_1=new pc.Vec3;var e=this.entity.getLocalRotation();console.log(e),this.ey=this.getYaw(e)*pc.math.RAD_TO_DEG,this.ex=this.getPitch(e,this.ey)*pc.math.RAD_TO_DEG,this.targetEx=this.ex,this.targetEy=this.ey,this.reset_targetEx=this.ex,this.reset_targetEy=this.ey,this.moved=!1,this.app.mouse.disableContextMenu(),this.lastTouchPosition=new pc.Vec2,this.addEventCallbacks();var onWindowResize=function(){t._checkAspectRatio()};window.addEventListener("resize",onWindowResize,!1),this.on("destroy",(function(){window.removeEventListener("resize",onWindowResize,!1),this.app.mouse&&this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onMouseMove,this),this.app.touch&&(this.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.off(pc.EVENT_TOUCHMOVE,this.onTouchMove,this))})),this._checkAspectRatio()},LookCamera.prototype._resettarget=function(){this.targetEx=this.reset_targetEx,this.targetEy=this.reset_targetEy,this.ex=this.reset_targetEx,this.ey=this.reset_targetEy,console.log(this.ex+"|"+this.ey)},LookCamera.prototype._checkAspectRatio=function(){var t=this.app.graphicsDevice.height,e=this.app.graphicsDevice.width;this.entity.camera.horizontalFov=t>e},LookCamera.prototype.addEventCallbacks=function(){this.app.mouse&&this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this))},LookCamera.prototype.update=function(t){var e=1;this.snappinessFactor>0&&(e=t/this.snappinessFactor),this.ex=pc.math.lerp(this.ex,this.targetEx,e),this.ey=pc.math.lerp(this.ey,this.targetEy,e),this.entity.setLocalEulerAngles(this.ex,this.ey,0)},LookCamera.prototype.moveCamera=function(t,e,o){this.moved?(this.targetEx-=e*o,this.targetEx=pc.math.clamp(this.targetEx,-90,90),this.targetEy-=t*o):this.moved=!0},LookCamera.prototype.onMouseMove=function(t){this.app.mouse.isPressed(pc.MOUSEBUTTON_LEFT)&&this.moveCamera(t.dx,t.dy,this.mouseLookSensitivity)},LookCamera.prototype.onTouchStart=function(t){var e=t.touches[0];this.lastTouchPosition.set(e.x,e.y)},LookCamera.prototype.onTouchMove=function(t){var e=t.touches[0];this.moveCamera(-(e.x-this.lastTouchPosition.x),-(e.y-this.lastTouchPosition.y),this.touchLookSensitivity),this.lastTouchPosition.set(e.x,e.y)},LookCamera.prototype.getYaw=function(){var t=this.entity.forward.clone();return Math.atan2(-t.x,-t.z)},LookCamera.prototype.getPitch=function(t,e){var o=this._tempQuat1,i=this._tempQuat2;i.setFromEulerAngles(0,-e,0),o.mul2(i,t);var s=this._tempVec3_1;return o.transformVector(pc.Vec3.FORWARD,s),Math.atan2(s.y,-s.z)};var Halo=pc.createScript("halo");Halo.prototype.initialize=function(){this.entity.model.material.blendType=pc.BLEND_ADDITIVEALPHA},Halo.prototype.update=function(t){};var Test=pc.createScript("test");Test.prototype.initialize=function(){this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this)},Test.prototype.update=function(e){},Test.prototype.onMouseDown=function(e){var t=document;t.fullscreenElement?t.exitFullscreen&&t.exitFullscreen():t.documentElement.requestFullscreen()};var WheelRotation=pc.createScript("wheelRotation");WheelRotation.prototype.initialize=function(){},WheelRotation.prototype.update=function(t){this.entity.rotateLocal(4,0,0)},WheelRotation.prototype.swap=function(t){};var ScrollingTexture=pc.createScript("scrollingTexture");ScrollingTexture.attributes.add("materialAsset",{type:"asset"}),ScrollingTexture.attributes.add("speed",{type:"vec2"}),ScrollingTexture.tmp=new pc.Vec2,ScrollingTexture.prototype.initialize=function(){this.materialAsset&&(this.material=this.materialAsset.resource)},ScrollingTexture.prototype.update=function(e){var t=ScrollingTexture.tmp;t.set(this.speed.x,this.speed.y),t.scale(e),this.material.diffuseMapOffset.add(t),this.material.normalMapOffset.add(t),this.material.update()};var Rotation=pc.createScript("rotation");Rotation.attributes.add("sensivity",{type:"number",default:.5}),Rotation.attributes.add("easing",{type:"number",default:.2}),Rotation.attributes.add("maxPitchUp",{type:"number",default:25}),Rotation.attributes.add("maxPitchDown",{type:"number",default:25}),Rotation.prototype.initialize=function(){var t=this.app;this.weight=1,this.oldQuat=new pc.Quat,this.pitchS=-20,this.yawS=10,t._carPivotRotation=this,window.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("touchstart",this.onTouchStart.bind(this)),window.addEventListener("touchmove",this.onTouchMove.bind(this)),window.addEventListener("touchend",this.onTouchEnd.bind(this)),this.rotating=!1,this.pitch=0,this.yaw=-15,this.pitchTarget=0,this.yawTarget=-15,this.m={x:0,y:0},this.ml={x:0,y:0},this.entity.setEulerAngles(this.pitch,this.yaw,0),this.rotateEnd=0,this.touchInd=-1},Rotation.prototype.onMouseDown=function(t){this.rotating=!0,this.m.x=t.clientX,this.m.y=t.clientY,this.ml.x=this.m.x,this.ml.y=this.m.y},Rotation.prototype.onMouseMove=function(t){this.m.x=t.clientX,this.m.y=t.clientY},Rotation.prototype.onMouseUp=function(t){this.rotating=!1,this.rotateEnd=Date.now()},Rotation.prototype.onTouchStart=function(t){if(this.rotating=!0,-1===this.touchInd&&t.touches.length){var i=t.touches[0];this.touchInd=i.identifier,this.m.x=i.clientX,this.m.y=i.clientY,this.ml.x=this.m.x,this.ml.y=this.m.y,t.preventDefault(),t.stopPropagation()}},Rotation.prototype.onTouchMove=function(t){for(var i=0;i<t.changedTouches.length;i++){var h=t.changedTouches[i];if(h.identifier===this.touchInd)return this.m.x=h.clientX,void(this.m.y=h.clientY)}},Rotation.prototype.onTouchEnd=function(t){this.rotating=!1,this.ratateEnd=Date.now(),this.touchInd=-1},Rotation.prototype.update=function(t){if(this.rotating){var i=this.ml.x-this.m.x,h=this.ml.y-this.m.y;this.pitchTarget=Math.max(-this.maxPitchUp,Math.min(this.maxPitchDown,this.pitchTarget+h*this.sensivity)),this.yawTarget+=i*this.sensivity,this.ml.x=this.m.x,this.ml.y=this.m.y}else Date.now()-this.rotateEnd>1e3&&(this.yawTarget+=10*t*Math.min(1,(Date.now()-this.rotateEnd-1e3)/2e3));Math.abs(this.pitch-this.pitchTarget)+Math.abs(this.yaw-this.yawTarget)>.1&&(this.pitch+=(this.pitchTarget-this.pitch)*this.easing,this.yaw+=(this.yawTarget-this.yaw)*this.easing,this.oldQuat.copy(this.entity.getRotation()),this.entity.setEulerAngles(this.pitch+this.pitchS,this.yaw+this.yawS,0),this.oldQuat.slerp(this.oldQuat,this.entity.getRotation(),this.weight),this.entity.setRotation(this.oldQuat))};var lookCameraInner=pc.createScript("lookCameraInner");lookCameraInner.attributes.add("mouseLookSensitivity",{type:"number",default:0,title:"Mouse Look Sensitivity"}),lookCameraInner.attributes.add("touchLookSensitivity",{type:"number",default:0,title:"Touch Look Sensitivity"}),lookCameraInner.attributes.add("snappinessFactor",{type:"number",default:.1,title:"Snappiness Factor",description:"Lower is faster"}),lookCameraInner.prototype.initialize=function(){this._tempQuat1=new pc.Quat,this._tempQuat2=new pc.Quat,this._tempVec3_1=new pc.Vec3;var t=this.entity.getLocalRotation();this.ey=this.getYaw(t)*pc.math.RAD_TO_DEG,this.ex=this.getPitch(t,this.ey)*pc.math.RAD_TO_DEG,this.targetEx=this.ex,this.targetEy=this.ey,this.moved=!1,this.app.mouse.disableContextMenu(),this.lastTouchPosition=new pc.Vec2,this.addEventCallbacks()},lookCameraInner.prototype.addEventCallbacks=function(){this.app.mouse&&this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this))},lookCameraInner.prototype.update=function(t){var e=1;this.snappinessFactor>0&&(e=t/this.snappinessFactor),this.ex=pc.math.lerp(this.ex,this.targetEx,e),this.ey=pc.math.lerp(this.ey,this.targetEy,e),this.entity.setLocalEulerAngles(this.ex,this.ey,0)},lookCameraInner.prototype.moveCamera=function(t,e,o){this.moved?(this.targetEx-=e*o,this.targetEx=pc.math.clamp(this.targetEx,-90,90),this.targetEy-=t*o):this.moved=!0},lookCameraInner.prototype.onMouseMove=function(t){this.app.mouse.isPressed(pc.MOUSEBUTTON_LEFT)&&this.moveCamera(t.dx,t.dy,this.mouseLookSensitivity)},lookCameraInner.prototype.onTouchStart=function(t){var e=t.touches[0];this.lastTouchPosition.set(e.x,e.y)},lookCameraInner.prototype.onTouchMove=function(t){var e=t.touches[0];this.moveCamera(-(e.x-this.lastTouchPosition.x),-(e.y-this.lastTouchPosition.y),this.touchLookSensitivity),this.lastTouchPosition.set(e.x,e.y)},lookCameraInner.prototype.getYaw=function(){var t=this.entity.forward.clone();return Math.atan2(-t.x,-t.z)},lookCameraInner.prototype.getPitch=function(t,e){var o=this._tempQuat1,i=this._tempQuat2;i.setFromEulerAngles(0,-e,0),o.mul2(i,t);var a=this._tempVec3_1;return o.transformVector(pc.Vec3.FORWARD,a),Math.atan2(a.y,-a.z)};var CssHandler=pc.createScript("cssHandler");CssHandler.attributes.add("css",{type:"asset",assetType:"css",title:"CSS Asset"}),CssHandler.prototype.initialize=function(){this.element=document.createElement("style"),document.head.appendChild(this.element),this.asset=null,this.assetId=0,this.on("destroy",(function(){document.head.removeChild(this.element)}))},CssHandler.prototype.attachAsset=function(s,t){if(this.assetId=s,!this.assetId)return t.call(this);var e=this.app.assets.get(this.assetId),a=this;e._onLoad=function(s){t.call(a,s,s.resource)},e.on("load",e._onLoad),t.call(this,e,e.resource),this.app.assets.load(e)},CssHandler.prototype.template=function(s,t){this.asset&&this.asset!==s&&this.asset.off("load",this.asset._onLoad),this.asset=s,this.element.innerHTML=t||""},CssHandler.prototype.update=function(s){this.assetId!==this.css.id&&this.attachAsset(this.css.id,this.template)};var HtmlHandler=pc.createScript("htmlHandler");function changeMaterialColor(t,e,n,a){t.colorTween&&t.colorTween.stop();var o={r:e.diffuse.r,g:e.diffuse.g,b:e.diffuse.b};t.colorTween=new TWEEN.Tween(o).to({r:n.r,g:n.g,b:n.b},1e3*a).easing(TWEEN.Easing.Quadratic.Out).start().onUpdate((function(){e.diffuse.r=o.r,e.diffuse.g=o.g,e.diffuse.b=o.b,e.update()}))}function addColorButton(t,e,n,a,o,i,s){var l=document.createElement("button");l.textContent=i,l.style.position="absolute",l.style.left=e+"px",l.style.top=n+"px",l.style.width=a+"px",l.style.height=o+"px";var clickListener=function(){changeMaterialColor(t,t.materialToChange.resource,s,t.changeDuration)};l.addEventListener("click",clickListener),l.addEventListener("touchend",clickListener),document.body.appendChild(l)}HtmlHandler.attributes.add("materialToChange",{type:"asset",assetType:"material"}),HtmlHandler.attributes.add("changeDuration",{type:"number"}),HtmlHandler.attributes.add("html",{type:"asset",assetType:"html",title:"HTML Asset"}),HtmlHandler.prototype.initialize=function(){let t=this;this.colorTween=null;let e=this;this.element=document.createElement("div"),this.element.classList.add("container_area"),this.element.setAttribute("id","container"),this.attachAsset(this.html.id,this.template),document.body.appendChild(this.element),this.asset=null,this.assetId=0,$("body").append('<input type="text" id="cp1" placeHolder="选颜色" style="opacity:0;z-index:1;">'),$("#cp1").css("position","absolute"),$("#cp1").css("bottom","200px"),$("#cp1").colorpicker({fillcolor:!0,success:function(t,n){console.log(n.colorRgb());let a=n.colorRgb(),o=new pc.Color(a[0]/255,a[1]/255,a[2]/255,1);changeMaterialColor(e,e.materialToChange.resource,o,e.changeDuration),$("#dialogContainer").animate({bottom:"0px"},30,(function(){$("#dialogContainer").css("zIndex",-1)})),$("ul li.active").removeClass("active")}}),$("#container").delegate("ul.content li","click",(function(){let e=$(this).index();console.log(e),0===e?$(this).hasClass("active")?($("#dialogContainer").animate({bottom:"0px"},30,(function(){$("#dialogContainer").css("zIndex",-1)})),$(this).removeClass("active")):($("#dialogContainer").animate({bottom:"46px"},30,(function(){$("#dialogContainer").css("zIndex",1),$("#cp1").trigger("click")})),$(this).addClass("active")):1==e?(t.app.fire("left:open","left:open"),t.app.fire("left:open:in","left:open:in")):3==e&&t.app.fire("lightOnOff","lightOnOff")})),this.on("destroy",(function(){$("#container").remove()}))},HtmlHandler.prototype.attachAsset=function(t,e){if(this.assetId=t,!this.assetId)return e.call(this);var n=this.app.assets.get(this.assetId),a=this;n._onLoad=function(t){e.call(a,t,t.resource)},n.on("load",n._onLoad),e.call(this,n,n.resource),this.app.assets.load(n)},HtmlHandler.prototype.template=function(t,e){this.asset&&this.asset!==t&&this.asset.off("load",this.asset._onLoad),this.asset=t,this.element.innerHTML=e||""},HtmlHandler.prototype.bindEvents=function(){this.element.querySelector("#container");$("#container")&&$("#container").delegate("li","click",(function(){let t=$(this).index();console.log(t),$("#dialogContainer").animate({bottom:"30px"},(function(){$("#dialogContainer").css("zIndex",1)}))}))},HtmlHandler.prototype.update=function(t){TWEEN.update()},HtmlHandler.prototype.swap=function(t){},String.prototype.colorRgb=function(){var t=this.toLowerCase();if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var e="#",n=1;n<4;n+=1)e+=t.slice(n,n+1).concat(t.slice(n,n+1));t=e}var a=[];for(let e=1;e<7;e+=2)a.push(parseInt("0x"+t.slice(e,e+2)));return a}return t};!function(e){var r=new Array("00","33","66","99","CC","FF"),t=new Array("FF0000","00FF00","0000FF","FFFF00","00FFFF","FF00FF");e.fn.colorpicker=function(o){var c=jQuery.extend({},jQuery.fn.colorpicker.defaults,o);return function initColor(){e("body").append('<div id="colorpanel" style="position: absolute; display: none;"></div>');var o="",c="";for(i=0;i<2;i++)for(j=0;j<6;j++)for(o+="<tr height=12>",o+='<td width=11 rel="#000000" style="background-color:#000000">',c=0==i?r[j]+r[j]+r[j]:t[j],o=o+'<td width=11 rel="#'+c+'" style="background-color:#'+c+'">',o+='<td width=11 rel="#000000" style="background-color:#000000">',k=0;k<3;k++)for(l=0;l<6;l++)c=r[k+3*i]+r[l]+r[j],o=o+'<td width=11 rel="#'+c+'" style="background-color:#'+c+'">';o='<table width=253 border="0" cellspacing="0" cellpadding="0" style="border:1px solid #000;"><tr height=30><td colspan=21 bgcolor=#cccccc><table cellpadding="0" cellspacing="1" border="0" style="border-collapse: collapse"><tr><td width="3"><td><input type="text" id="DisColor" size="6" disabled style="border:solid 1px #000000;background-color:#ffff00"></td><td width="3"><td><input type="text" id="HexColor" size="7" style="border:inset 1px;font-family:Arial;" value="#000000"><a href="javascript:void(0);" id="_cclose">关闭</a> | <a href="javascript:void(0);" id="_creset">重置</a></td></tr></table></td></table><table id="CT" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="000000"  style="cursor:pointer;">'+o+"</table>",e("#colorpanel").html(o),e("#_cclose").live("click",(function(){return e("#colorpanel").hide(),!1})).css({"font-size":"12px","padding-left":"20px"})}(),this.each((function(){var r=e(this);r.bind(c.event,(function(){var t=e(this).offset().top,l=e(this).height(),o=e(this).offset().left;e("#colorpanel").css({top:t+l+5,left:o}).show();var a=c.target?e(c.target):r;null==a.data("color")&&a.data("color",a.css("color")),null==a.data("value")&&a.data("value",a.val()),e("#_creset").bind("click",(function(){a.css("color",a.data("color")).val(a.data("value")),e("#colorpanel").hide(),c.reset(r)})),e("#CT tr td").unbind("click").mouseover((function(){var r=e(this).css("background-color");e("#DisColor").css("background",r),e("#HexColor").val(e(this).attr("rel"))})).click((function(){var t=e(this).attr("rel");t=c.ishex?t:function getRGBColor(e){var r;e&&e.constructor==Array&&3==e.length&&(e=e);(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))&&(e=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])]);(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))&&(e=[2.55*parseFloat(r[1]),2.55*parseFloat(r[2]),2.55*parseFloat(r[3])]);(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))&&(e=[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]);(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))&&(e=[parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)]);return"rgb("+e[0]+","+e[1]+","+e[2]+")"}(t),c.fillcolor&&a.val(t),a.css("color",t),e("#colorpanel").hide(),e("#_creset").unbind("click"),c.success(r,t)}))}))}))},jQuery.fn.colorpicker.defaults={ishex:!0,fillcolor:!1,target:null,event:"click",success:function(){},reset:function(){}}}(jQuery);var TWEEN=TWEEN||function(){var n=[];return{getAll:function(){return n},removeAll:function(){n=[]},add:function(t){n.push(t)},remove:function(t){var r=n.indexOf(t);-1!==r&&n.splice(r,1)},update:function(t,r){if(0===n.length)return!1;var i=0;for(t=void 0!==t?t:TWEEN.now();i<n.length;)n[i].update(t)||r?i++:n.splice(i,1);return!0}}}();(function(){void 0===this.window&&void 0!==this.process?TWEEN.now=function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e3}:void 0!==this.window&&void 0!==window.performance&&void 0!==window.performance.now?TWEEN.now=window.performance.now.bind(window.performance):void 0!==Date.now?TWEEN.now=Date.now:TWEEN.now=function(){return(new Date).getTime()}}).bind(this)(),TWEEN.Tween=function(n){var t,r=n,i={},o={},u={},e=1e3,a=0,f=!1,c=!1,s=!1,h=0,l=null,E=TWEEN.Easing.Linear.None,p=TWEEN.Interpolation.Linear,d=[],v=null,w=!1,I=null,M=null,T=null;for(var N in n)i[N]=parseFloat(n[N],10);this.to=function(n,t){return void 0!==t&&(e=t),o=n,this},this.start=function(n){for(var t in TWEEN.add(this),c=!0,w=!1,l=void 0!==n?n:TWEEN.now(),l+=h,o){if(o[t]instanceof Array){if(0===o[t].length)continue;o[t]=[r[t]].concat(o[t])}void 0!==i[t]&&(i[t]=r[t],i[t]instanceof Array==!1&&(i[t]*=1),u[t]=i[t]||0)}return this},this.stop=function(){return c?(TWEEN.remove(this),c=!1,null!==T&&T.call(r),this.stopChainedTweens(),this):this},this.end=function(){return this.update(l+e),this},this.stopChainedTweens=function(){for(var n=0,t=d.length;n<t;n++)d[n].stop()},this.delay=function(n){return h=n,this},this.repeat=function(n){return a=n,this},this.repeatDelay=function(n){return t=n,this},this.yoyo=function(n){return f=n,this},this.easing=function(n){return E=n,this},this.interpolation=function(n){return p=n,this},this.chain=function(){return d=arguments,this},this.onStart=function(n){return v=n,this},this.onUpdate=function(n){return I=n,this},this.onComplete=function(n){return M=n,this},this.onStop=function(n){return T=n,this},this.update=function(n){var c,T,N;if(n<l)return!0;for(c in!1===w&&(null!==v&&v.call(r),w=!0),N=E(T=(T=(n-l)/e)>1?1:T),o)if(void 0!==i[c]){var W=i[c]||0,O=o[c];O instanceof Array?r[c]=p(O,N):("string"==typeof O&&(O="+"===O.charAt(0)||"-"===O.charAt(0)?W+parseFloat(O,10):parseFloat(O,10)),"number"==typeof O&&(r[c]=W+(O-W)*N))}if(null!==I&&I.call(r,N),1===T){if(a>0){for(c in isFinite(a)&&a--,u){if("string"==typeof o[c]&&(u[c]=u[c]+parseFloat(o[c],10)),f){var m=u[c];u[c]=o[c],o[c]=m}i[c]=u[c]}return f&&(s=!s),l=void 0!==t?n+t:n+h,!0}null!==M&&M.call(r);for(var g=0,y=d.length;g<y;g++)d[g].start(l+e);return!1}return!0}},TWEEN.Easing={Linear:{None:function(n){return n}},Quadratic:{In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}},Cubic:{In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}},Quartic:{In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}},Quintic:{In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}},Sinusoidal:{In:function(n){return 1-Math.cos(n*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return.5*(1-Math.cos(Math.PI*n))}},Exponential:{In:function(n){return 0===n?0:Math.pow(1024,n-1)},Out:function(n){return 1===n?1:1-Math.pow(2,-10*n)},InOut:function(n){return 0===n?0:1===n?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(2-Math.pow(2,-10*(n-1)))}},Circular:{In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}},Elastic:{In:function(n){return 0===n?0:1===n?1:-Math.pow(2,10*(n-1))*Math.sin(5*(n-1.1)*Math.PI)},Out:function(n){return 0===n?0:1===n?1:Math.pow(2,-10*n)*Math.sin(5*(n-.1)*Math.PI)+1},InOut:function(n){return 0===n?0:1===n?1:(n*=2)<1?-.5*Math.pow(2,10*(n-1))*Math.sin(5*(n-1.1)*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin(5*(n-1.1)*Math.PI)+1}},Back:{In:function(n){var t=1.70158;return n*n*((t+1)*n-t)},Out:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},InOut:function(n){var t=2.5949095;return(n*=2)<1?n*n*((t+1)*n-t)*.5:.5*((n-=2)*n*((t+1)*n+t)+2)}},Bounce:{In:function(n){return 1-TWEEN.Easing.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?.5*TWEEN.Easing.Bounce.In(2*n):.5*TWEEN.Easing.Bounce.Out(2*n-1)+.5}}},TWEEN.Interpolation={Linear:function(n,t){var r=n.length-1,i=r*t,o=Math.floor(i),u=TWEEN.Interpolation.Utils.Linear;return t<0?u(n[0],n[1],i):t>1?u(n[r],n[r-1],r-i):u(n[o],n[o+1>r?r:o+1],i-o)},Bezier:function(n,t){for(var r=0,i=n.length-1,o=Math.pow,u=TWEEN.Interpolation.Utils.Bernstein,e=0;e<=i;e++)r+=o(1-t,i-e)*o(t,e)*n[e]*u(i,e);return r},CatmullRom:function(n,t){var r=n.length-1,i=r*t,o=Math.floor(i),u=TWEEN.Interpolation.Utils.CatmullRom;return n[0]===n[r]?(t<0&&(o=Math.floor(i=r*(1+t))),u(n[(o-1+r)%r],n[o],n[(o+1)%r],n[(o+2)%r],i-o)):t<0?n[0]-(u(n[0],n[0],n[1],n[1],-i)-n[0]):t>1?n[r]-(u(n[r],n[r],n[r-1],n[r-1],i-r)-n[r]):u(n[o?o-1:0],n[o],n[r<o+1?r:o+1],n[r<o+2?r:o+2],i-o)},Utils:{Linear:function(n,t,r){return(t-n)*r+n},Bernstein:function(n,t){var r=TWEEN.Interpolation.Utils.Factorial;return r(n)/r(t)/r(n-t)},Factorial:function(){var n=[1];return function(t){var r=1;if(n[t])return n[t];for(var i=t;i>1;i--)r*=i;return n[t]=r,r}}(),CatmullRom:function(n,t,r,i,o){var u=.5*(r-n),e=.5*(i-t),a=o*o;return(2*t-2*r+u+e)*(o*a)+(-3*t+3*r-2*u-e)*a+u*o+t}}},function(n){"function"==typeof define&&define.amd?define([],(function(){return TWEEN})):"undefined"!=typeof module&&"object"==typeof exports?module.exports=TWEEN:void 0!==n&&(n.TWEEN=TWEEN)}(this);var ChangeScene=pc.createScript("changeScene");ChangeScene.attributes.add("sceneId",{type:"string",default:"0",title:"Scene ID to Load"}),ChangeScene.attributes.add("event_name",{type:"string"}),ChangeScene.prototype.initialize=function(){this.app.on(this.event_name,this.CallEvent),this.app.on("goMainScene",this.goMainScene),this.on("destroy",(function(){this.app.off(this.event_name,this.CallEvent)})),this.entity.name=this.event_name},ChangeScene.prototype.CallEvent=function(e){pc.app.root.findByName(e).script.changeScene.changeScenes()},ChangeScene.prototype.loadScene=function(e,n){var t=e+".json";this.app.scenes.loadSceneHierarchy(t,(function(e,t){e?console.error(e):n(t)}))},ChangeScene.prototype.changeScenes=function(){var e=this.app.root.findByName("Root"),n=this.app.scenes.find("Main");console.log(n),this.loadScene(this.sceneId,(function(){e.destroy()}))},ChangeScene.prototype.goMainScene=function(){var e=this.root.findByName("Root");e.destroy();var n=this.scenes.find("Main");console.log(n);let t=n.url.split(".")[0];this.scenes.loadSceneData(n,(function(e){console.log(e)})),this.loadScene(t,(function(){e.destroy()}))};var GoMainScene=pc.createScript("GoMainScene");GoMainScene.attributes.add("sceneId",{type:"string",default:"0",title:"Scene ID to Load"}),GoMainScene.attributes.add("event_name",{type:"string"}),GoMainScene.prototype.initialize=function(){this.app.on(this.event_name,this.CallEvent),this.on("destroy",(function(){this.app.off(this.event_name,this.CallEvent)})),this.entity.name=this.event_name},GoMainScene.prototype.CallEvent=function(e){pc.app.root.findByName(e).script.GoMainScene.changeScenes()},GoMainScene.prototype.loadScene=function(e,n){var t=e+".json";this.app.scenes.loadSceneHierarchy(t,(function(e,t){e?console.error(e):n(t)}))},GoMainScene.prototype.changeScenes=function(){var e=this.app.root.findByName("Root"),n=this.app.scenes.find("Main");console.log(n),this.loadScene(this.sceneId,(function(){e.destroy()}))},GoMainScene.prototype.goMainScene=function(){var e=this.root.findByName("Root");e.destroy();var n=this.scenes.find("Main");console.log(n);let t=n.url.split(".")[0];this.scenes.loadSceneData(n,(function(e){console.log(e)})),this.loadScene(t,(function(){e.destroy()}))};